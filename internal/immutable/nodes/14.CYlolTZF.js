import{t as x,a as y,c as os,d as At}from"../chunks/Ddf-pde4.js";import"../chunks/CUbRwKUw.js";import{ae as Bt,x as E,ap as De,aq as I,ag as Ut,aJ as is,ar as s,c as l,b as ne,f as t,r as a,l as m,as as ns,aK as te,av as Be}from"../chunks/COAlzTlh.js";import{s as f}from"../chunks/DMAFUHRH.js";import{i as H}from"../chunks/D_Rr-0e8.js";import{e as st,i as at}from"../chunks/HfpreXtq.js";import{h as ds}from"../chunks/iCJorLeU.js";import{s as _,c as cs,b as Se,r as ke,a as vs}from"../chunks/C24kGzoz.js";import{e as g}from"../chunks/C8-GFTye.js";import{b as Te}from"../chunks/CZ0ZreRe.js";import{p as Nt}from"../chunks/CWmzcjye.js";import{i as Yt}from"../chunks/1VC0eZX2.js";import{o as us}from"../chunks/PcSmvWFM.js";import{g as ps}from"../chunks/FyuCb5qo.js";import{b as w}from"../chunks/Diqcyxgn.js";import{g as ms}from"../chunks/C822oQpk.js";import{p as fs}from"../chunks/CaEP5R6u.js";import{b as gs,a as ws}from"../chunks/CH-qU2yJ.js";import{b as hs}from"../chunks/BYqunLH5.js";import{l as jt,p as ie}from"../chunks/DfO8xPXH.js";import{P as It}from"../chunks/XVZJVHkn.js";const _s=!0,sa=Object.freeze(Object.defineProperty({__proto__:null,prerender:_s},Symbol.toStringTag,{value:"Module"}));function Vt(){const J=document.getElementById("current-datetime");if(J){const u=new Date,K={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};J.textContent=u.toLocaleDateString("en-US",K)}}function ys(){document.querySelectorAll(".search-fields input").forEach(u=>{const K=u.id+"_"+Math.random().toString(36).substring(2,9);u.setAttribute("name",K),(u.id==="State"||u.id==="Zip"||u.id==="Date"||u.id==="ST-address"||u.id==="City"||u.id==="Fuel")&&(u.setAttribute("autocomplete","new-password"),u.setAttribute("data-lpignore","true"),u.setAttribute("data-form-type","other"))})}var bs=x('<div class="dropdown-item svelte-1o6jmi1"> </div>'),qs=x('<label> </label> <div class="custom-dropdown svelte-1o6jmi1"><div class="input-wrapper svelte-1o6jmi1"><input> <div class="dropdown-arrow svelte-1o6jmi1"></div></div> <div></div></div>',1);function Mt(J,u){const K=jt(u,["children","$$slots","$$events","$$legacy"]),xe=jt(K,["prerender","id","label","placeholder","options","value","onChange"]);Bt(u,!1);let F=ie(u,"id",8,""),S=ie(u,"label",8,""),$e=ie(u,"placeholder",8,"Select or type"),V=ie(u,"options",24,()=>[]),M=ie(u,"value",12,""),B=ie(u,"onChange",8,()=>{});const b=!0;let o=E(!1),A=E(),U=E([...V()]);function se(){m(o,!t(o)),t(o)&&m(U,[...V()])}function Y(h){M(h),B()(h),m(o,!1)}function W(){const h=M().toLowerCase();m(U,V().filter(Z=>Z.toLowerCase().includes(h))),m(o,!0)}function de(h){t(A)&&!t(A).contains(h.target)&&m(o,!1)}function Ue(h){h.stopPropagation(),m(U,[...V()]),se()}Yt();var P=qs();g("click",is,de);var ae=De(P),ce=l(ae,!0);a(ae);var ve=s(ae,2),ue=l(ve),N=l(ue);ke(N);let pe;var Ye=s(N,2);a(ue);var le=s(ue,2);let re;return st(le,5,()=>t(U),at,(h,Z)=>{var O=bs(),Ce=l(O,!0);a(O),I(()=>f(Ce,t(Z))),g("click",O,()=>Y(t(Z))),y(h,O)}),a(le),a(ve),hs(ve,h=>m(A,h),()=>t(A)),I(h=>{_(ae,"for",F()),f(ce,S()),pe=cs(N,pe,{id:F(),type:"text",placeholder:$e(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",...xe},"svelte-1o6jmi1"),re=Se(le,1,"dropdown-content svelte-1o6jmi1",null,re,h)},[()=>({show:t(o)})],ne),Te(N,M),g("input",N,W),g("focus",N,()=>{m(U,[...V()]),m(o,!0)}),g("keydown",N,function(h){ws.call(this,u,h)}),g("click",Ye,Ue),y(J,P),gs(u,"prerender",b),Ut({prerender:b})}var Ds=os('<meta charset="UTF-8" class="svelte-wd5soq"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-wd5soq"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-wd5soq"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-wd5soq"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-wd5soq"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-wd5soq"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-wd5soq"><\/script>',1),Ss=x('<tr class="svelte-wd5soq"><td colspan="5" style="text-align: center; padding: 20px;" class="svelte-wd5soq">Loading events...</td></tr>'),ks=x('<tr class="svelte-wd5soq"><td colspan="5" style="text-align: center; padding: 20px; color: red;" class="svelte-wd5soq"> </td></tr>'),Ts=x('<tr><td colspan="4" class="details-cell svelte-wd5soq"><div class="details-header svelte-wd5soq">Details:</div> <div class="details-content svelte-wd5soq"><div class="detail-row svelte-wd5soq"> </div> <div class="detail-row svelte-wd5soq"><span class="label svelte-wd5soq">Trailer No.:</span> </div> <div class="detail-row svelte-wd5soq"><span class="label svelte-wd5soq">Full Address:</span> </div> <div class="detail-row svelte-wd5soq"><span class="label svelte-wd5soq">Product:</span> <span class="label svelte-wd5soq">Tank:</span> </div></div></td><td class="svelte-wd5soq"><button class="more-details svelte-wd5soq">View Vehicle Timeline</button></td></tr>'),xs=x('<tr><td class="svelte-wd5soq"> </td><td class="svelte-wd5soq"> </td><td class="svelte-wd5soq"> </td><td class="svelte-wd5soq"> </td><td class="svelte-wd5soq"> </td></tr> <!>',1),$s=x('<tr class="svelte-wd5soq"><td colspan="5" style="text-align: center; padding: 20px;" class="svelte-wd5soq">No results found</td></tr>'),Cs=x('<div class="loading-message svelte-wd5soq" style="text-align: center;">Loading events...</div>'),Ls=x('<div class="error-message svelte-wd5soq" style="text-align: center;"> </div>'),Es=x('<div class="card-details svelte-wd5soq"><hr class="svelte-wd5soq"> <div class="details-header svelte-wd5soq">Details:</div> <div class="details-content svelte-wd5soq"><div class="detail-row svelte-wd5soq"> </div> <div class="detail-row svelte-wd5soq"><span class="label svelte-wd5soq">Trailer No:</span> </div> <div class="detail-row svelte-wd5soq"><span class="label svelte-wd5soq">Full Address:</span> </div> <div class="detail-row svelte-wd5soq"><span class="label svelte-wd5soq">Product:</span> <span class="label svelte-wd5soq">Tank:</span> </div> <button class="more-details mobile-details-btn svelte-wd5soq">View Vehicle Timeline</button></div></div>'),Ps=x('<div><div class="card-header svelte-wd5soq"><div class="card-item svelte-wd5soq"><span class="card-label svelte-wd5soq"> </span></div> <div class="card-item svelte-wd5soq"><span class="card-value svelte-wd5soq" style="margin-left: 2vw;"> </span> <span class="card-value svelte-wd5soq" style="margin-left: 2vw;"> </span> <span class="card-value svelte-wd5soq" style="position: relative;margin-left:auto"> </span></div></div> <!></div>'),Fs=x('<div class="no-results svelte-wd5soq" style="text-align: center;">No results found</div>'),As=x(`<header class="svelte-wd5soq"><div class="header-container svelte-wd5soq"><div class="top-header svelte-wd5soq"><a class="top-header-link svelte-wd5soq" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-wd5soq" href=" ">Contact Us</a></div> <div class="header svelte-wd5soq"><div class="header-background svelte-wd5soq"></div> <div class="hamburger-menu svelte-wd5soq" id="hamburger-menu"><span class="svelte-wd5soq"></span> <span class="svelte-wd5soq"></span> <span class="svelte-wd5soq"></span></div> <a class="svelte-wd5soq">Home</a> <a class="svelte-wd5soq">Inventory</a> <a class="svelte-wd5soq">Cross-Drop Prevention</a> <a class="svelte-wd5soq">Site Data</a> <a class="svelte-wd5soq">Analytics</a> <input type="text" placeholder="Search..." class="svelte-wd5soq"> <img alt="Berrys Logo" class="svelte-wd5soq"></div></div></header> <div class="mobile-sidebar svelte-wd5soq" id="mobile-sidebar"><a class="svelte-wd5soq">Home</a> <a class="svelte-wd5soq">Vehicle Logging</a> <a class="svelte-wd5soq">Cross-Drop Prevention</a> <a class="svelte-wd5soq">Site Data</a> <a class="svelte-wd5soq">Inventory</a> <a class="svelte-wd5soq">Analytics</a> <span class="footer-text svelte-wd5soq">Contact Us <br class="svelte-wd5soq"> Berrys Technologies Ltd 141 Lichfield Road, Birmingham , B6 5SP , United Kingdom <br class="svelte-wd5soq"> 0121 558 4411 <br class="svelte-wd5soq"> enquiries@berrys.com</span></div> <div class="overlay svelte-wd5soq" id="overlay"></div> <div class="sub-header-container svelte-wd5soq"><div class="sub-header svelte-wd5soq"><img alt="Truck Graphic" class="subheader-image svelte-wd5soq"> <h1 class="svelte-wd5soq">Vehicle Logging</h1> <span class="svelte-wd5soq">Access key information on each trailer, with real-time access to
          deliveries, focusing on trailer ID. See where trailers are located, what
          they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-wd5soq"><a class="svelte-wd5soq">Home</a> / <span class="svelte-wd5soq">Vehicle Logging</span></div></div> <main class="vehicle-logging-page svelte-wd5soq"><div class="main-container svelte-wd5soq"><button class="toggle-search-btn svelte-wd5soq"><label for="search-fields" class="search-label svelte-wd5soq">Search <span style="font-size:1rem" class="svelte-wd5soq"> </span></label></button> <div><label for="ST-address" class="svelte-wd5soq">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-wd5soq"> <!> <!> <label for="Trailer_No" class="svelte-wd5soq">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-wd5soq"> <label for="Date" class="svelte-wd5soq">Date</label> <input type="date" id="Date" name="Date" placeholder="YYYY-MM-DD" class="svelte-wd5soq"> <label for="Fuel" class="svelte-wd5soq">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-wd5soq"> <div class="button-container svelte-wd5soq"><button class="search-button svelte-wd5soq">Search</button> <button class="clear-button svelte-wd5soq">Clear</button></div></div> <div class="table-header svelte-wd5soq"><div class="live-status svelte-wd5soq"><div class="toggle-live svelte-wd5soq"><label for="table-type" class="table-type svelte-wd5soq">LIVE <span class="live-indicator svelte-wd5soq"></span></label></div> <label for="table-type" class="table-type svelte-wd5soq"><span id="current-datetime" class="current-time svelte-wd5soq"></span></label></div> <div class="export-dropdown svelte-wd5soq"><button class="export-button svelte-wd5soq">Export As ▼</button> <div class="dropdown-content svelte-wd5soq" id="exportDropdown"><a href=" " class="svelte-wd5soq">CSV</a> <a href=" " class="svelte-wd5soq">PDF</a></div></div></div> <div class="data-container svelte-wd5soq"><table class="desktop-view svelte-wd5soq"><thead class="svelte-wd5soq"><tr class="svelte-wd5soq"><th class="svelte-wd5soq">Date</th><th class="svelte-wd5soq">Time</th><th class="svelte-wd5soq">City</th><th class="svelte-wd5soq">Vehicle ID</th><th class="svelte-wd5soq">Prevented Delivery</th></tr></thead><tbody class="svelte-wd5soq"><!></tbody></table> <div class="mobile-card-view svelte-wd5soq"><!></div></div></div></main> <footer class="svelte-wd5soq"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-wd5soq"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-wd5soq">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-wd5soq"></div></footer>`,1);function aa(J,u){Bt(u,!1);const K=ps(fs).url.pathname;function xe(e){ms(`${w}/vehicle/${e["Trailer No."]}`,{state:{from:K,trailer:e["Trailer No."]}})}let F=[],S=E([]),$e=E([]),V=E([]),M=E(!0),B=E(null),b=E([]),o=E({address:"",state:"",city:"",trailer:"",date:"",fuel:""}),A=E(!1);async function U(){try{m(M,!0),m(B,null),console.log("Fetching prevented delivery events from API...");const e=await fetch(`${It}/api/Vehicle_Logging`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json();console.log("Prevented Delivery Events Data Loaded:",r),F=r,m(S,[...F]),m(V,[...new Set(F.map(i=>i.State).filter(i=>i&&i.trim()!==""))]),m($e,[...new Set(F.map(i=>i.City).filter(i=>i&&i.trim()!==""))]),m(b,Array(t(S).length).fill(!1)),re(!0)}catch(e){console.error("Error fetching prevented delivery events:",e),m(B,"Failed to load prevented delivery events data. Please try again.")}finally{m(M,!1)}}function se(e){if(!e)return"";const[r,i,q]=e.split("."),d=new Date(q,i-1,r);if(isNaN(d.getTime()))return e;const v=new Date;if((v-d)/(1e3*60)<=30)return"Just now";if(d.getDate()===v.getDate()&&d.getMonth()===v.getMonth()&&d.getFullYear()===v.getFullYear())return"Today";const p=new Date(v);if(p.setDate(v.getDate()-1),d.getDate()===p.getDate()&&d.getMonth()===p.getMonth()&&d.getFullYear()===p.getFullYear())return"Yesterday";const n=new Date(v);if(n.setDate(v.getDate()-2),d.getDate()===n.getDate()&&d.getMonth()===n.getMonth()&&d.getFullYear()===n.getFullYear())return"Two days ago";const k={year:"numeric",month:"long",day:"numeric"};return d.toLocaleDateString("en-US",k)}function Y(e){return typeof e!="number"||isNaN(e)?"":new Date(e*1e3).toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit",year:"numeric"}).replace(/\//g,".")}function W(e){return typeof e!="number"||isNaN(e)?"":new Date(e*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function de(e){return e%2===0?"row-even":"row-odd"}function Ue(){m(A,!t(A))}function P(){m(S,F.filter(e=>{const r=!t(o).address||e.Address&&e.Address.toLowerCase().includes(t(o).address.toLowerCase()),i=!t(o).state||e.State&&e.State.toLowerCase().includes(t(o).state.toLowerCase()),q=!t(o).city||e.City&&e.City.toLowerCase().includes(t(o).city.toLowerCase()),d=!t(o).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(o).trailer.toLowerCase()),v=e.event_timestamp?new Date(e.event_timestamp*1e3).toISOString().split("T")[0]:"",D=!t(o).date||v&&v.includes(t(o).date),$=!t(o).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(o).fuel.toLowerCase());return r&&i&&q&&d&&D&&$})),m(b,Array(t(S).length).fill(!1)),re()}function ae(){console.log("Clearing search parameters."),m(o,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),m(S,[...F]),m(b,Array(t(S).length).fill(!1)),re(!0)}function ce(e){te(b,t(b)[e]=!t(b)[e]),m(b,t(b))}function ve(){document.getElementById("exportDropdown").classList.toggle("show")}function ue(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(r=>r.value.trim()!=="")}function N(){let e=[];const r=["Date","Time","City","Vehicle ID","Prevented Delivery","Address","State","Tank No."];e.push(r.join(",")),t(S).forEach(n=>{const k=Y(n.event_timestamp),z=W(n.event_timestamp),c=[`"${k}"`,`"${z}"`,`"${n.City||""}"`,`"${n["Trailer No."]||""}"`,`"${n["Prevented Delivery "]||""}"`,`"${n.Address||""}"`,`"${n.State||""}"`,`"T${n.tank_number||""}"`];e.push(c.join(","))});const i=e.join(`
`),q=new Blob([i],{type:"text/csv;charset=utf-8;"}),d=new Date,v=d.toISOString().split("T")[0],D=d.toTimeString().split(" ")[0].replace(/:/g,"-"),p=`vehicle_logging_${v}_${D}.csv`;if("showSaveFilePicker"in window){async function n(){try{const z=await(await window.showSaveFilePicker({suggestedName:p,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await z.write(q),await z.close()}catch(k){k.name!=="AbortError"&&pe(q,p)}}n()}else pe(q,p)}function pe(e,r){const i=document.createElement("a");i.href=URL.createObjectURL(e),i.setAttribute("download",r),document.body.appendChild(i),i.click(),document.body.removeChild(i)}async function Ye(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const r=new e;r.setFont("helvetica","bold"),r.setFontSize(16),r.text("Vehicle Logging Data",14,15);const i=new Date().toLocaleString();r.setFontSize(10),r.setFont("helvetica","normal"),r.text(`Generated: ${i}`,14,25);const q=["Date","Time","City","Vehicle ID","Prevented Delivery","Address","State","Tank No."],d=t(S).map(n=>[Y(n.event_timestamp),W(n.event_timestamp),n.City||"",n["Trailer No."]||"",n["Prevented Delivery "]||"",n.Address||"",n.State||"",`T${n.tank_number||""}`]);r.autoTable({head:[q],body:d,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const v=new Date,D=v.toISOString().split("T")[0],$=v.toTimeString().split(" ")[0].replace(/:/g,"-"),p=`vehicle_logging_${D}_${$}.pdf`;if("showSaveFilePicker"in window)try{const k=await(await window.showSaveFilePicker({suggestedName:p,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await k.write(r.output("blob")),await k.close()}catch(n){console.error("File save error:",n),le(r,p)}else le(r,p);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function le(e,r){e.save(r)}function re(e=!1){const r=document.querySelector(".toggle-live");r&&(!e&&ue()?r.style.display="none":r.style.display="block")}function h(){const e=document.getElementById("hamburger-menu"),r=document.getElementById("mobile-sidebar"),i=document.getElementById("overlay");e&&r&&i&&(e.addEventListener("click",function(){r.classList.toggle("active"),i.style.display=r.classList.contains("active")?"block":"none"}),i.addEventListener("click",function(){r.classList.remove("active"),i.style.display="none"}),r.querySelectorAll("a").forEach(d=>{d.addEventListener("click",function(){r.classList.remove("active"),i.style.display="none"})}))}us(async()=>{h(),Vt(),ys();const e=new EventSource(`${It}/api/events/subscribe`);e.onopen=()=>{console.log("Connected to SSE stream.")},e.addEventListener("dataUpdate",i=>{console.log("Received SSE update:",i.data),JSON.parse(i.data).type==="vehicleLogging"&&(console.log("Vehicle Logging data changed via SSE, re-fetching..."),U())}),e.onerror=i=>{console.error("SSE connection error:",i),e.close()},await U();const r=setInterval(Vt,1e3);return()=>{e.close(),console.log("SSE connection closed."),clearInterval(r)}}),Yt();var Z=As();ds(e=>{var r=Ds();ns.title="Vehicle Logging",Be(12),y(e,r)});var O=De(Z),Ce=l(O),lt=s(l(Ce),2),rt=l(lt);vs(rt,`background: url(${w??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${w??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${w??""}/svg/Vector_1.svg);`);var ot=s(rt,4);_(ot,"href",`${w??""}/home`);var it=s(ot,2);_(it,"href",`${w??""}/inventory`);var nt=s(it,2);_(nt,"href",`${w??""}/cross-drops`);var dt=s(nt,2);_(dt,"href",`${w??""}/site-data`);var ct=s(dt,2);_(ct,"href",`${w??""}/analytics`);var Ot=s(ct,4);_(Ot,"src",`${w??""}/images/Midas_Link_logo.png`),a(lt),a(Ce),a(O);var Oe=s(O,2),vt=l(Oe);_(vt,"href",`${w??""}/home`);var ut=s(vt,2);_(ut,"href",`${w??""}/vehicle-logging`);var pt=s(ut,2);_(pt,"href",`${w??""}/cross-drops`);var mt=s(pt,2);_(mt,"href",`${w??""}/site-data`);var ft=s(mt,2);_(ft,"href",`${w??""}/inventory`);var zt=s(ft,2);_(zt,"href",`${w??""}/analytics`),Be(2),a(Oe);var ze=s(Oe,4),Re=l(ze),Rt=l(Re);_(Rt,"src",`${w??""}/images/Truck_graphic.png`),Be(4),a(Re);var gt=s(Re,2),Gt=l(gt);_(Gt,"href",`${w??""}/home`),Be(2),a(gt),a(ze);var Ge=s(ze,2),wt=l(Ge),Le=l(wt),ht=l(Le),_t=s(l(ht)),Ht=l(_t,!0);a(_t),a(ht),a(Le);var Ee=s(Le,2);let yt;var Pe=s(l(Ee),2);ke(Pe);var bt=s(Pe,2);Mt(bt,{id:"State",label:"State",get options(){return t(V)},get value(){return t(o).state},set value(e){te(o,t(o).state=e)},$$events:{keydown:e=>{e.key==="Enter"&&P()}},$$legacy:!0});var qt=s(bt,2);Mt(qt,{id:"City",label:"City",get options(){return t($e)},get value(){return t(o).city},set value(e){te(o,t(o).city=e)},$$events:{keydown:e=>{e.key==="Enter"&&P()}},$$legacy:!0});var Fe=s(qt,4);ke(Fe);var Ae=s(Fe,4);ke(Ae);var Ne=s(Ae,4);ke(Ne);var Dt=s(Ne,2),St=l(Dt),Jt=s(St,2);a(Dt),a(Ee);var He=s(Ee,2),kt=s(l(He),2),Tt=l(kt),xt=s(Tt,2),$t=l(xt),Kt=s($t,2);a(xt),a(kt),a(He);var Ct=s(He,2),Je=l(Ct),Lt=s(l(Je)),Wt=l(Lt);{var Zt=e=>{var r=Ss();y(e,r)},Qt=(e,r)=>{{var i=d=>{var v=ks(),D=l(v),$=l(D,!0);a(D),a(v),I(()=>f($,t(B))),y(d,v)},q=(d,v)=>{{var D=p=>{var n=At(),k=De(n);st(k,1,()=>t(S),at,(z,c,C)=>{var R=xs(),j=De(R),Q=l(j),je=l(Q,!0);a(Q);var me=s(Q),Ie=l(me,!0);a(me);var X=s(me),Ke=l(X,!0);a(X);var ee=s(X),We=l(ee,!0);a(ee);var fe=s(ee),Ze=l(fe,!0);a(fe),a(j);var Qe=s(j,2);{var Xe=L=>{var T=Ts(),G=l(T),oe=s(l(G),2),ge=l(oe),we=l(ge);a(ge);var he=s(ge,2),_e=s(l(he));a(he);var ye=s(he,2),be=s(l(ye));a(ye);var qe=s(ye,2),Ve=s(l(qe)),et=s(Ve,2);a(qe),a(oe),a(G);var Me=s(G),tt=l(Me);a(Me),a(T),I((as,ls,rs)=>{Se(T,1,`details-row ${as??""}`,"svelte-wd5soq"),f(we,`${ls??""} | ${rs??""}`),f(_e,` ${t(c)["Trailer No."]??""}`),f(be,` ${(t(c).Address||"")??""}, ${t(c).City??""} ${t(c).State??""}`),f(Ve,` ${(t(c)["Prevented Delivery "]||t(c).Delivered||"")??""} | `),f(et,` T${(t(c).tank_number||"")??""}`)},[()=>de(C),()=>se(Y(t(c).event_timestamp)),()=>W(t(c).event_timestamp)],ne),g("click",tt,()=>xe(t(c))),g("click",T,()=>ce(C)),y(L,T)};H(Qe,L=>{t(b)[C]&&L(Xe)})}I((L,T,G)=>{Se(j,1,`main-row ${L??""} ${t(b)[C]?"hover-row":""}`,"svelte-wd5soq"),f(je,T),f(Ie,G),f(Ke,t(c).City),f(We,t(c)["Trailer No."]),f(Ze,t(c)["Prevented Delivery "]||t(c).Delivered)},[()=>de(C),()=>se(Y(t(c).event_timestamp)),()=>W(t(c).event_timestamp)],ne),g("click",j,()=>ce(C)),y(z,R)}),y(p,n)},$=p=>{var n=$s();y(p,n)};H(d,p=>{t(S).length>0?p(D):p($,!1)},v)}};H(e,d=>{t(B)?d(i):d(q,!1)},r)}};H(Wt,e=>{t(M)?e(Zt):e(Qt,!1)})}a(Lt),a(Je);var Et=s(Je,2),Xt=l(Et);{var es=e=>{var r=Cs();y(e,r)},ts=(e,r)=>{{var i=d=>{var v=Ls(),D=l(v,!0);a(v),I(()=>f(D,t(B))),y(d,v)},q=(d,v)=>{{var D=p=>{var n=At(),k=De(n);st(k,1,()=>t(S),at,(z,c,C)=>{var R=Ps(),j=l(R),Q=l(j),je=l(Q),me=l(je,!0);a(je),a(Q);var Ie=s(Q,2),X=l(Ie),Ke=l(X);a(X);var ee=s(X,2),We=l(ee);a(ee);var fe=s(ee,2),Ze=l(fe,!0);a(fe),a(Ie),a(j);var Qe=s(j,2);{var Xe=L=>{var T=Es(),G=s(l(T),4),oe=l(G),ge=l(oe);a(oe);var we=s(oe,2),he=s(l(we));a(we);var _e=s(we,2),ye=s(l(_e));a(_e);var be=s(_e,2),qe=s(l(be)),Ve=s(qe,2);a(be);var et=s(be,2);a(G),a(T),I((Me,tt)=>{f(ge,`${Me??""} | ${tt??""}`),f(he,` ${t(c)["Trailer No."]??""}`),f(ye,` ${(t(c).Address||"")??""}, ${(t(c).City||"")??""} ${(t(c).State||"")??""}`),f(qe,` ${(t(c)["Prevented Delivery "]||t(c).Delivered||"")??""} `),f(Ve,` T${(t(c).tank_number||"")??""}`)},[()=>se(Y(t(c).event_timestamp)),()=>W(t(c).event_timestamp)],ne),g("click",et,()=>xe(t(c))),y(L,T)};H(Qe,L=>{t(b)[C]&&L(Xe)})}a(R),I((L,T)=>{Se(R,1,`card ${L??""}`,"svelte-wd5soq"),f(me,T),f(Ke,`Product: ${(t(c)["Prevented Delivery "]||t(c).Delivered)??""}`),f(We,`Vehicle: ${t(c)["Trailer No."]??""}`),f(Ze,t(b)[C]?"▲":"▼")},[()=>de(C),()=>se(Y(t(c).event_timestamp))],ne),g("click",R,()=>ce(C)),y(z,R)}),y(p,n)},$=p=>{var n=Fs();y(p,n)};H(d,p=>{t(S).length>0?p(D):p($,!1)},v)}};H(e,d=>{t(B)?d(i):d(q,!1)},r)}};H(Xt,e=>{t(M)?e(es):e(ts,!1)})}a(Et),a(Ct),a(wt),a(Ge);var Pt=s(Ge,2),Ft=l(Pt),ss=s(l(Ft),2);_(ss,"src",`${w??""}/images/logo.png`),a(Ft),a(Pt),I(e=>{f(Ht,t(A)?"▲":"▼"),yt=Se(Ee,1,"search-fields svelte-wd5soq",null,yt,e)},[()=>({visible:t(A)})],ne),g("click",Le,Ue),Te(Pe,()=>t(o).address,e=>te(o,t(o).address=e)),g("keydown",Pe,e=>{e.key==="Enter"&&P()}),Te(Fe,()=>t(o).trailer,e=>te(o,t(o).trailer=e)),g("keydown",Fe,e=>{e.key==="Enter"&&P()}),Te(Ae,()=>t(o).date,e=>te(o,t(o).date=e)),g("keydown",Ae,e=>{e.key==="Enter"&&P()}),Te(Ne,()=>t(o).fuel,e=>te(o,t(o).fuel=e)),g("keydown",Ne,e=>{e.key==="Enter"&&P()}),g("click",St,P),g("click",Jt,ae),g("click",Tt,ve),g("click",$t,Nt(N)),g("click",Kt,Nt(Ye)),y(J,Z),Ut()}export{aa as component,sa as universal};
