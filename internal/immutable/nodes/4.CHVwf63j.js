import{t as b,a as n,c as ge,d as _e}from"../chunks/B844KiKP.js";import"../chunks/DKOGnCGE.js";import{ae as je,ap as D,aq as E,ag as ye,au as xe,ar as a,b as J,c as t,r as s,f as r,x as A,aw as ke,l as h}from"../chunks/BXsRLg6A.js";import{s as l}from"../chunks/-CDTaoNk.js";import{i as B}from"../chunks/dTEDWTZQ.js";import{e as Le,i as $e}from"../chunks/FxtfLCaA.js";import{h as Ue}from"../chunks/BuC1pS7D.js";import{s as K}from"../chunks/8eJ-M5eg.js";import{e as Q}from"../chunks/JJDN1UTm.js";import{i as Ie}from"../chunks/DFYwXNvY.js";import{o as Me}from"../chunks/B7JBmkl3.js";import{b as c}from"../chunks/4by-I32q.js";import{g as w}from"../chunks/CCl6RMWa.js";import{P as Pe}from"../chunks/XVZJVHkn.js";const De=!1,We=Object.freeze(Object.defineProperty({__proto__:null,prerender:De},Symbol.toStringTag,{value:"Module"}));var Ee=ge('<script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"><\/script> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet"> <link rel="stylesheet">',1),Ae=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6">Loading users</td></tr>'),Be=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6"> </td></tr>'),Ce=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td></tr>'),Se=b('<header><div class="header-container"><div class="top-header"><a class="top-header-link" href="https://berrys.com">berrys.com</a></div> <div class="header"><button class="header-btn svelte-1jdwbw6">Dashboard</button> <button class="header-btn svelte-1jdwbw6">Logout</button></div></div></header> <div class="main-container svelte-1jdwbw6"><div class="dashboard-header svelte-1jdwbw6"><h1 class="svelte-1jdwbw6">Manage users</h1> <div class="date-time"> </div></div> <div class="data-container"><table class="desktop-view svelte-1jdwbw6"><thead class="svelte-1jdwbw6"><tr class="svelte-1jdwbw6"><th class="svelte-1jdwbw6">User ID</th><th class="svelte-1jdwbw6">Full Name</th><th class="svelte-1jdwbw6">Company Name</th><th class="svelte-1jdwbw6">Email</th><th class="svelte-1jdwbw6">Phone Number</th><th class="svelte-1jdwbw6">Is Admin</th><th class="svelte-1jdwbw6">Last Login</th></tr></thead><tbody class="svelte-1jdwbw6"><!></tbody></table></div></div> <footer><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;"><span style="font-size: 1rem; font-family: Mulish;">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo"></div></footer>',1);function Xe(V,W){je(W,!1);let p=A([]),u=A(null),g=A(!0);function X(e){return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"-")}async function Z(){await w(`${c}/login?authMessage=${encodeURIComponent("You have been logged out.")}`)}async function ee(){h(g,!0),h(u,null);try{const e=await fetch(`${Pe}/api/admin/users`,{credentials:"include"});if(!e.ok)if(e.status===401){await w(`${c}/login?authMessage=${encodeURIComponent("Your session has expired. Please log in again.")}`);return}else if(e.status===403){await w(`${c}/login?authMessage=${encodeURIComponent("Access Denied. You do not have administrator privileges.")}`);return}else{const o=await e.json().catch(()=>({message:"Unknown error occurred."}));throw new Error(o.error||`HTTP Error: ${e.status}`)}h(p,await e.json()),console.log("Admin users loaded:",r(p))}catch(e){console.error("Error fetching admin users:",e),h(u,e.message||"Failed to load users. Please try again.")}finally{h(g,!1)}}Me(async()=>{await ee()}),Ie();var C=Se();Ue(e=>{var o=Ee();xe.title="Manage Users";var x=a(D(o),14);K(x,"href",`${c??""}/css/styles.css`),n(e,o)});var _=D(C),S=t(_),T=a(t(S),2),N=t(T),te=ke(()=>w(`${c}/admin`)),se=a(N,2);s(T),s(S),s(_);var j=a(_,2),y=t(j),R=a(t(y),2),ae=t(R,!0);s(R),s(y);var Y=a(y,2),F=t(Y),q=a(t(F)),re=t(q);{var oe=e=>{var o=Ae();n(e,o)},le=(e,o)=>{{var x=d=>{var v=Be(),f=t(v),m=t(f,!0);s(f),s(v),E(()=>l(m,r(u))),n(d,v)},de=(d,v)=>{{var f=m=>{var O=_e(),ne=D(O);Le(ne,1,()=>r(p),$e,(ce,i)=>{var k=Ce(),L=t(k),ve=t(L,!0);s(L);var $=a(L),me=t($);s($);var U=a($),he=t(U,!0);s(U);var I=a(U),pe=t(I,!0);s(I);var M=a(I),ue=t(M,!0);s(M);var P=a(M),fe=t(P,!0);s(P);var H=a(P),we=t(H,!0);s(H),s(k),E(be=>{l(ve,r(i).user_id),l(me,`${r(i).first_name??""} ${r(i).last_name??""}`),l(he,r(i).company_name),l(pe,r(i).email),l(ue,r(i).phone_number),l(fe,r(i).is_admin?"Yes":"No"),l(we,be)},[()=>X(r(i).last_login)],J),n(ce,k)}),n(m,O)};B(d,m=>{r(p).length>0&&m(f)},v)}};B(e,d=>{r(u)?d(x):d(de,!1)},o)}};B(re,e=>{r(g)?e(oe):e(le,!1)})}s(q),s(F),s(Y),s(j);var z=a(j,2),G=t(z),ie=a(t(G),2);K(ie,"src",`${c??""}/images/logo.png`),s(G),s(z),E(e=>l(ae,e),[()=>new Date().toLocaleString()],J),Q("click",N,function(...e){var o;(o=r(te))==null||o.apply(this,e)}),Q("click",se,Z),n(V,C),ye()}export{Xe as component,We as universal};
