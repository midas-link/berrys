import{t as g,a as m}from"../chunks/B844KiKP.js";import"../chunks/DKOGnCGE.js";import{ae as se,as as ae,at as te,ap as re,aq as k,f as o,ag as oe,au as ie,c as t,ar as l,l as a,x as v,av as N,r}from"../chunks/BXsRLg6A.js";import{s as x}from"../chunks/-CDTaoNk.js";import{i as R}from"../chunks/dTEDWTZQ.js";import{h as le}from"../chunks/BuC1pS7D.js";import{a as P,s as S,r as z}from"../chunks/8eJ-M5eg.js";import{e as ne}from"../chunks/JJDN1UTm.js";import{b as J}from"../chunks/BBtNbwhJ.js";import{p as ve}from"../chunks/CWmzcjye.js";import{i as de}from"../chunks/DFYwXNvY.js";import{s as ce,a as pe}from"../chunks/ORKq4Oba.js";import{o as ue}from"../chunks/B7JBmkl3.js";import{b as d}from"../chunks/CtJ1Nm_q.js";import{P as me}from"../chunks/XVZJVHkn.js";import{g as ge}from"../chunks/DiEdCbA5.js";import{p as fe}from"../chunks/on3NNU0H.js";const he=!1,De=Object.freeze(Object.defineProperty({__proto__:null,prerender:he},Symbol.toStringTag,{value:"Module"}));var _e=g('<meta charset="UTF-8" class="svelte-euvd2h"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-euvd2h"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-euvd2h"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-euvd2h">',1),be=g('<p class="svelte-euvd2h"> </p>'),ye=g('<p style="color: red;" class="svelte-euvd2h"> </p>'),$e=g(`<div class="body-container svelte-euvd2h"><img class="midas-link-logo svelte-euvd2h" alt="logo"> <main class="svelte-euvd2h"><div class="content svelte-euvd2h"><div class="sign-in-container svelte-euvd2h"><form class="sign-in-form svelte-euvd2h"><!> <!> <p class="sign-in-title svelte-euvd2h">Sign in to your account</p> <div class="form-group svelte-euvd2h"><label for="email" class="svelte-euvd2h">Your email</label> <input type="email" id="email" name="email" placeholder="email@domain.com" required class="svelte-euvd2h"></div> <div class="form-group svelte-euvd2h"><label for="password" class="svelte-euvd2h">Password</label> <input type="password" id="password" name="password" placeholder="•••••••••" required class="svelte-euvd2h"></div> <div class="form-group below-password-container svelte-euvd2h"><label class="checkbox-container svelte-euvd2h"><input type="checkbox" name="remember" class="svelte-euvd2h"> <span class="checkmark svelte-euvd2h"></span> Remember me</label> <a href=" " class="forgot-password svelte-euvd2h">Forgot Password?</a></div> <button type="submit" class="sign-in-button svelte-euvd2h">Sign In</button> <div class="no-account svelte-euvd2h">Don't have an account? <a class="sign-up-link svelte-euvd2h">Sign up</a></div></form> <div id="popup" class="popup svelte-euvd2h"><div class="popup-content svelte-euvd2h"><p id="popup-message" class="svelte-euvd2h"> </p> <div id="loading-indicator" class="loading-indicator svelte-euvd2h"><p class="svelte-euvd2h">Loading...</p> <div class="spinner svelte-euvd2h"></div></div></div></div></div></div></main></div> <footer class="svelte-euvd2h"><img alt="logo" class="svelte-euvd2h"></footer>`,1);function Fe(Y,G){se(G,!1);const[H,K]=ce(),L=()=>pe(fe,"$page",H),f=v();let h=v(""),_=v(""),i=v(""),c=v(!1),b=v(!1);async function Q(){a(i,""),a(c,!1),a(b,!1);try{const e=await fetch(`${me}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:o(h),password:o(_)})}),s=await e.json();if(e.ok){a(i,s.message||"Logged in successfully."),a(c,!1),a(b,!0),localStorage.setItem("is_admin",s.isAdmin?"true":"false");const n=s.isAdmin?`${d}/admin`:`${d}/home`;setTimeout(()=>{ge(n)},2e3)}else e.status===429?a(i,s.error):e.status===400?a(i,s.error.map(n=>n.msg).join(`
 & `)):e.status===401?a(i,s.error):a(i,`An unexpected login error occured. Status: ${e.status}.`),a(c,!0)}catch(e){console.error("Client-side login error:",e),a(i,"Network error or server unreachable. Please check your connection."),a(c,!0)}}ue(()=>{}),ae(()=>L(),()=>{a(f,L().url.searchParams.get("authMessage")||"")}),te(),de();var M=$e();le(e=>{var s=_e();ie.title="Login",N(6),m(e,s)});var p=re(M);P(p,`background-image: url(${d??""}/images/Sign-in-page.jpg)`);var j=t(p);S(j,"src",`${d??""}/images/Midas_Link_logo.png`);var A=l(j,2),I=t(A),T=t(I),u=t(T),O=t(u);{var V=e=>{var s=be(),n=t(s,!0);r(s),k(()=>{P(s,`color: ${o(c)?"red":"green"};`),x(n,o(i))}),m(e,s)};R(O,e=>{o(i)&&e(V)})}var q=l(O,2);{var W=e=>{var s=ye(),n=t(s,!0);r(s),k(()=>x(n,o(f))),m(e,s)};R(q,e=>{o(f)&&e(W)})}var y=l(q,4),C=l(t(y),2);z(C),r(y);var $=l(y,2),E=l(t($),2);z(E),r($);var U=l($,6),X=l(t(U));S(X,"href",`${d??""}/register`),r(U),r(u);var w=l(u,2),B=t(w),D=t(B),Z=t(D);r(D),N(2),r(B),r(w),r(T),r(I),r(A),r(p);var F=l(p,2),ee=t(F);S(ee,"src",`${d??""}/images/logo.png`),r(F),k(()=>{P(w,`display: ${o(b)?"flex":"none"};`),x(Z,`✅ ${o(i)??""}`)}),J(C,()=>o(h),e=>a(h,e)),J(E,()=>o(_),e=>a(_,e)),ne("submit",u,ve(Q)),m(Y,M),oe(),K()}export{Fe as component,De as universal};
