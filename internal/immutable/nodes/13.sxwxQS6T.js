import{t as q,a as E,c as $t,d as tt}from"../chunks/BH13Z9z8.js";import"../chunks/DNyCRkWS.js";import{_ as Ct,ap as ne,aq as W,a as t,a0 as Lt,au as Ft,ar as a,c as l,A as oe,m as ie,aw as z,s as P,av as at,r}from"../chunks/bqrR2dOs.js";import{s as p}from"../chunks/C93Zg23q.js";import{i as ce}from"../chunks/B8PK6R75.js";import{e as st,i as lt}from"../chunks/BCehYjPx.js";import{h as At}from"../chunks/CeRXAMUy.js";import{a as Et,s as g,b as ve,r as U}from"../chunks/DnL43C8x.js";import{e as f}from"../chunks/C5hrIerT.js";import{b as J}from"../chunks/DaeiHhzB.js";import{i as Nt}from"../chunks/0IjRvDC7.js";import{o as Pt}from"../chunks/BUq4umeo.js";import{g as Mt}from"../chunks/0KinHf2G.js";import{b}from"../chunks/C7ZQdsQO.js";import{g as Vt}from"../chunks/jelzbA2V.js";import{p as It}from"../chunks/0yNQ3MHw.js";const qt=!0,ba=Object.freeze(Object.defineProperty({__proto__:null,prerender:qt},Symbol.toStringTag,{value:"Module"}));let de=[];async function Yt(){if(de.length>0)return de;try{const h=await fetch("/table_data/vehicle_logging.json");if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const c=await h.json();return de=c,c}catch(h){return console.error("Error fetching vehicleData data:",h),new Promise((c,$)=>{const y=new XMLHttpRequest;y.open("GET","table_data/vehicle_logging.json",!0),y.onload=function(){if(y.status===200)try{const i=JSON.parse(y.responseText);de=i,c(i)}catch(i){console.error("Error parsing JSON:",i),$(i)}else console.error("XHR error:",y.status),$(new Error(`XHR error: ${y.status}`))},y.onerror=function(){console.error("XHR error occurred"),$(new Error("XHR error occurred"))},y.send()})}}function De(h){if(!h)return"";const[c,$,y]=h.split("."),i=new Date(y,c-1,$);if(isNaN(i.getTime()))return h;const d=new Date;if((d-i)/(1e3*60)<=30)return"Just now";if(i.getDate()===d.getDate()&&i.getMonth()===d.getMonth()&&i.getFullYear()===d.getFullYear())return"Today";const N=new Date(d);if(N.setDate(d.getDate()-1),i.getDate()===N.getDate()&&i.getMonth()===N.getMonth()&&i.getFullYear()===N.getFullYear())return"Yesterday";const M=new Date(d);if(M.setDate(d.getDate()-2),i.getDate()===M.getDate()&&i.getMonth()===M.getMonth()&&i.getFullYear()===M.getFullYear())return"Two days ago";const be={year:"numeric",month:"long",day:"numeric"};return i.toLocaleDateString("en-US",be)}function rt(){const h=document.getElementById("current-datetime");if(h){const c=new Date,$={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};h.textContent=c.toLocaleDateString("en-US",$)}}function Rt(){document.querySelectorAll(".search-fields input").forEach(c=>{const $=c.id+"_"+Math.random().toString(36).substring(2,9);c.setAttribute("name",$),(c.id==="State"||c.id==="Zip"||c.id==="Date"||c.id==="ST-address"||c.id==="City"||c.id==="Fuel")&&(c.setAttribute("autocomplete","new-password"),c.setAttribute("data-lpignore","true"),c.setAttribute("data-form-type","other"))})}var Bt=$t('<meta charset="UTF-8" class="svelte-bnejlb"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-bnejlb"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-bnejlb"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-bnejlb"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-bnejlb"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-bnejlb"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-bnejlb"><\/script>',1),Ht=q('<tr><td colspan="4" class="details-cell svelte-bnejlb"><div class="details-header svelte-bnejlb">Details:</div> <div class="details-content svelte-bnejlb"> <br class="svelte-bnejlb"> <span class="label svelte-bnejlb">Trailer No.:</span> <br class="svelte-bnejlb"> <span class="label svelte-bnejlb">Full Address:</span> <br class="svelte-bnejlb"> <span class="label svelte-bnejlb">Delivered:</span> <span class="label svelte-bnejlb">Tank:</span> </div></td><td class="svelte-bnejlb"><button class="more-details svelte-bnejlb">View Vehicle Timeline</button></td></tr>'),Ot=q('<tr><td class="svelte-bnejlb"> </td><td class="svelte-bnejlb"> </td><td class="svelte-bnejlb"> </td><td class="svelte-bnejlb"> </td><td class="svelte-bnejlb"> </td></tr> <!>',1),zt=q('<tr class="svelte-bnejlb"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-bnejlb">No results found</td></tr>'),Ut=q('<div class="card-details svelte-bnejlb"><hr class="svelte-bnejlb"> <div class="details-header svelte-bnejlb">Details:</div> <div class="details-content svelte-bnejlb"><div class="detail-row svelte-bnejlb"><span class="label svelte-bnejlb">Full Address:</span> </div> <div class="detail-row svelte-bnejlb"><span class="label svelte-bnejlb">Tank:</span> </div> <button class="more-details mobile-details-btn svelte-bnejlb">View Vehicle Timeline</button></div></div>'),Jt=q('<div><div class="card-header svelte-bnejlb"><div class="card-item svelte-bnejlb"><span class="card-label svelte-bnejlb"> </span></div> <div class="card-item svelte-bnejlb"><span class="card-value svelte-bnejlb" style="margin-left: 2vw;"> </span> <span class="card-value svelte-bnejlb" style="margin-left: 2vw;"> </span> <span class="card-value svelte-bnejlb" style="position: relative;margin-left:auto"> </span></div></div> <!></div>'),Xt=q('<div class="no-results svelte-bnejlb">No results found</div>'),Gt=q(`<header class="svelte-bnejlb"><div class="header-container svelte-bnejlb"><div class="top-header svelte-bnejlb"><a class="top-header-link svelte-bnejlb" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-bnejlb" href=" ">Contact Us</a></div> <div class="header svelte-bnejlb"><div class="header-background svelte-bnejlb"></div> <div class="hamburger-menu svelte-bnejlb" id="hamburger-menu"><span class="svelte-bnejlb"></span> <span class="svelte-bnejlb"></span> <span class="svelte-bnejlb"></span></div> <a class="svelte-bnejlb">Home</a> <a class="svelte-bnejlb">Inventory</a> <a class="svelte-bnejlb">Cross-Drop Prevention</a> <a class="svelte-bnejlb">Site Data</a> <a class="svelte-bnejlb">Analytics</a> <input type="text" placeholder="Search..." class="svelte-bnejlb"> <img alt="Berrys Logo" class="svelte-bnejlb"></div></div></header> <div class="mobile-sidebar svelte-bnejlb" id="mobile-sidebar"><a class="svelte-bnejlb">Home</a> <a class="svelte-bnejlb">Vehicle Logging</a> <a class="svelte-bnejlb">Cross-Drop Prevention</a> <a class="svelte-bnejlb">Site Data</a> <a class="svelte-bnejlb">Inventory</a> <a class="svelte-bnejlb">Analytics</a></div> <div class="overlay svelte-bnejlb" id="overlay"></div> <div class="sub-header-container svelte-bnejlb"><div class="sub-header svelte-bnejlb"><h1 class="svelte-bnejlb">Vehicle Logging</h1> <span class="svelte-bnejlb">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-bnejlb"><a class="svelte-bnejlb">Home</a> / <span class="svelte-bnejlb">Vehicle Logging</span></div></div> <main class="svelte-bnejlb"><div class="main-container svelte-bnejlb"><label for="search-fields" class="search-label svelte-bnejlb">Search <button class="toggle-search-btn svelte-bnejlb"> </button></label> <div><label for="ST-address" class="svelte-bnejlb">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-bnejlb"> <label for="State" class="svelte-bnejlb">State</label> <input type="text" id="State" name="State" class="svelte-bnejlb"> <label for="City" class="svelte-bnejlb">City</label> <input type="text" id="City" name="City" class="svelte-bnejlb"> <label for="Trailer_No" class="svelte-bnejlb">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-bnejlb"> <label for="Date" class="svelte-bnejlb">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-bnejlb"> <label for="Fuel" class="svelte-bnejlb">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-bnejlb"> <div class="button-container svelte-bnejlb"><button class="search-button svelte-bnejlb">Search</button> <button class="clear-button svelte-bnejlb">Clear</button></div></div> <div class="table-header svelte-bnejlb"><div class="live-status svelte-bnejlb"><div class="toggle-live svelte-bnejlb"><label for="table-type" class="table-type svelte-bnejlb">LIVE <span class="live-indicator svelte-bnejlb"></span></label></div> <label for="table-type" class="table-type svelte-bnejlb"><span id="current-datetime" class="current-time svelte-bnejlb"></span></label></div> <div class="export-dropdown svelte-bnejlb"><button class="export-button svelte-bnejlb">Export As ▼</button> <div class="dropdown-content svelte-bnejlb" id="exportDropdown"><a href=" " class="svelte-bnejlb">CSV</a> <a href=" " class="svelte-bnejlb">PDF</a></div></div></div> <div class="data-container svelte-bnejlb"><table class="desktop-view svelte-bnejlb"><thead class="svelte-bnejlb"><tr class="svelte-bnejlb"><th class="svelte-bnejlb">Date</th><th class="svelte-bnejlb">Time</th><th class="svelte-bnejlb">City</th><th class="svelte-bnejlb">Vehicle ID</th><th class="svelte-bnejlb">Prevented Delivery</th></tr></thead><tbody class="svelte-bnejlb"><!></tbody></table> <div class="mobile-card-view svelte-bnejlb"><!></div></div></div></main> <footer class="svelte-bnejlb"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-bnejlb"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-bnejlb">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-bnejlb"></div></footer>`,1);function ua(h,c){Ct(c,!1);const $=Mt(It).url.pathname;function y(e){Vt(`${b}/vehicle/${e["Trailer No."]}`,{state:{from:$,trailer:e["Trailer No."]}})}let i=[],d=ie([]),F=ie([]),o=ie({address:"",state:"",city:"",trailer:"",date:"",fuel:""}),N=ie(!1);function M(e){return e%2===0?"row-even":"row-odd"}function be(){P(N,!t(N))}function Y(){P(d,i.filter(e=>{const s=!t(o).address||e.Address&&e.Address.toLowerCase().includes(t(o).address.toLowerCase()),j=!t(o).state||e.State&&e.State.toLowerCase().includes(t(o).state.toLowerCase()),_=!t(o).city||e.City&&e.City.toLowerCase().includes(t(o).city.toLowerCase()),n=!t(o).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(o).trailer.toLowerCase()),u=!t(o).date||e.Date&&e.Date.includes(t(o).date),m=!t(o).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(o).fuel.toLowerCase());return s&&j&&_&&n&&u&&m})),P(F,Array(t(d).length).fill(!1)),ke()}function nt(){console.log("clearing"),P(o,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(o)),P(d,[...i]),P(F,Array(t(d).length).fill(!1)),ke(!0)}function ot(){document.getElementById("exportDropdown").classList.toggle("show")}function it(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(s=>s.value.trim()!=="")}function ue(e){let s=[...t(F)];s[e]=!s[e],P(F,s)}function ct(){const s=document.querySelector("table").cloneNode(!0);s.querySelectorAll(".more-details").forEach(v=>{v.parentNode.textContent=""});const _=s.querySelectorAll("tr");let n=[];const u=[];_[0].querySelectorAll("th").forEach(v=>{u.push(v.textContent.trim())}),n.push(u.join(","));for(let v=1;v<_.length;v++){const x=[];_[v].querySelectorAll("td").forEach(X=>{let G=X.textContent.trim().replace(/"/g,'""');x.push(`"${G}"`)}),x.length>0&&n.push(x.join(","))}const w=n.join(`
`),S=new Blob([w],{type:"text/csv;charset=utf-8;"}),C=new Date,k=C.toISOString().split("T")[0],T=C.toTimeString().split(" ")[0].replace(/:/g,"-"),R=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${k}_${T}.csv`;if("showSaveFilePicker"in window){async function v(){try{const I=await(await window.showSaveFilePicker({suggestedName:R,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await I.write(S),await I.close()}catch(x){x.name!=="AbortError"&&A()}}v()}else A();function A(){const v=document.createElement("a");v.href=URL.createObjectURL(S),v.setAttribute("download",R),document.body.appendChild(v),v.click(),document.body.removeChild(v)}}function vt(){const e=document.getElementById("hamburger-menu"),s=document.getElementById("mobile-sidebar"),j=document.getElementById("overlay");e.addEventListener("click",function(){s.classList.toggle("active"),j.style.display=s.classList.contains("active")?"block":"none"}),j.addEventListener("click",function(){s.classList.remove("active"),j.style.display="none"}),s.querySelectorAll("a").forEach(n=>{n.addEventListener("click",function(){s.classList.remove("active"),j.style.display="none"})})}async function dt(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const s=new e;s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Vehicle Logging Data",14,15);const j=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${j}`,14,25);const _=document.querySelector("table");if(!_)throw new Error("Table not found");const n=_.cloneNode(!0);n.querySelectorAll(".more-details").forEach(k=>{const T=k.closest("td, th");T&&(T.textContent="")}),s.autoTable({html:n,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const m=new Date,w=m.toISOString().split("T")[0],S=m.toTimeString().split(" ")[0].replace(/:/g,"-"),C=`vehicle_logging_${w}_${S}.pdf`;if("showSaveFilePicker"in window)try{const T=await(await window.showSaveFilePicker({suggestedName:C,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await T.write(s.output("blob")),await T.close()}catch(k){console.error("File save error:",k),Se(s,C)}else Se(s,C);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function Se(e,s){e.save(s)}function ke(e=!1){const s=document.querySelector(".toggle-live");s&&(!e&&it()?s.style.display="none":s.style.display="block")}Pt(async()=>{vt(),rt(),Rt(),console.log("Starting data fetch");try{const s=await Yt();console.log("Data fetched:",s),i=s,P(d,[...i]),P(F,Array(i.length).fill(!1))}catch(s){console.error("Failed to load data:",s)}const e=setInterval(rt,1e3);return()=>{clearInterval(e)}}),Nt();var Te=Gt();At(e=>{var s=Bt();Ft.title="Vehicle Logging",at(12),E(e,s)});var pe=ne(Te),xe=l(pe),$e=a(l(xe),2),Ce=l($e);Et(Ce,`      background: url(${b??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${b??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${b??""}/svg/Vector_1.svg);`);var Le=a(Ce,4);g(Le,"href",`${b??""}/home`);var Fe=a(Le,2);g(Fe,"href",`${b??""}/inventory`);var Ae=a(Fe,2);g(Ae,"href",`${b??""}/cross-drops`);var Ee=a(Ae,2);g(Ee,"href",`${b??""}/site-data`);var Ne=a(Ee,2);g(Ne,"href",`${b??""}/analytics`);var bt=a(Ne,4);g(bt,"src",`${b??""}/images/Midas_Link_logo.png`),r($e),r(xe),r(pe);var fe=a(pe,2),Pe=l(fe);g(Pe,"href",`${b??""}/home`);var Me=a(Pe,2);g(Me,"href",`${b??""}/vehicle-logging`);var Ve=a(Me,2);g(Ve,"href",`${b??""}/cross-drops`);var Ie=a(Ve,2);g(Ie,"href",`${b??""}/site-data`);var qe=a(Ie,2);g(qe,"href",`${b??""}/inventory`);var ut=a(qe,2);g(ut,"href",`${b??""}/analytics`),r(fe);var he=a(fe,4),Ye=a(l(he),2),pt=l(Ye);g(pt,"href",`${b??""}/home`),at(2),r(Ye),r(he);var me=a(he,2),Re=l(me),ge=l(Re),ye=a(l(ge)),ft=l(ye,!0);r(ye),r(ge);var Z=a(ge,2);let Be;var K=a(l(Z),2);U(K);var Q=a(K,4);U(Q);var ee=a(Q,4);U(ee);var te=a(ee,4);U(te);var ae=a(te,4);U(ae);var je=a(ae,4);U(je);var He=a(je,2),Oe=l(He),ht=a(Oe,2);r(He),r(Z);var _e=a(Z,2),ze=a(l(_e),2),Ue=l(ze),Je=a(Ue,2),Xe=l(Je),mt=a(Xe,2);r(Je),r(ze),r(_e);var Ge=a(_e,2),we=l(Ge),We=a(l(we)),gt=l(We);{var yt=e=>{var s=tt(),j=ne(s);st(j,1,()=>t(d),lt,(_,n,u)=>{var m=Ot(),w=ne(m),S=l(w),C=l(S,!0);r(S);var k=a(S),T=l(k,!0);r(k);var V=a(k),R=l(V,!0);r(V);var A=a(V),v=l(A,!0);r(A);var x=a(A),I=l(x,!0);r(x),r(w);var X=a(w,2);{var G=L=>{var D=Ht(),B=l(D),H=a(l(B),2),se=l(H),O=a(se,4),le=a(O,4),re=a(le,4),kt=a(re,2);r(H),r(B);var et=a(B),Tt=l(et);r(et),r(D),W(xt=>{ve(D,1,`details-row ${xt??""}`,"svelte-bnejlb"),p(se,`${t(n).Date??""} | ${(t(n).Time||"")??""} `),p(O,` ${(t(n)["Trailer No."]||"")??""} `),p(le,` ${(t(n).Address||"")??""} , ${t(n).City??""} ${t(n).State??""} `),p(re,` ${(t(n)["Prevented Delivery "]||"")??""} | `),p(kt,` T${(t(n)["Tank No. "]||"")??""}`)},[()=>M(u)],oe),f("click",Tt,()=>y(t(n))),f("click",D,()=>ue(u)),E(L,D)};ce(X,L=>{t(F)[u]&&L(G)})}W((L,D)=>{ve(w,1,`main-row ${L??""} ${t(F)[u]?"hover-row":""}`,"svelte-bnejlb"),p(C,D),p(T,t(n).Time),p(R,t(n).City),p(v,t(n)["Trailer No."]),p(I,t(n)["Prevented Delivery "])},[()=>M(u),()=>De(t(n).Date)],oe),f("click",w,()=>ue(u)),E(_,m)}),E(e,s)},jt=e=>{var s=zt();E(e,s)};ce(gt,e=>{t(d).length>0?e(yt):e(jt,!1)})}r(We),r(we);var Ze=a(we,2),_t=l(Ze);{var wt=e=>{var s=tt(),j=ne(s);st(j,1,()=>t(d),lt,(_,n,u)=>{var m=Jt(),w=l(m),S=l(w),C=l(S),k=l(C,!0);r(C),r(S);var T=a(S,2),V=l(T),R=l(V);r(V);var A=a(V,2),v=l(A);r(A);var x=a(A,2),I=l(x,!0);r(x),r(T),r(w);var X=a(w,2);{var G=L=>{var D=Ut(),B=a(l(D),4),H=l(B),se=a(l(H));r(H);var O=a(H,2),le=a(l(O));r(O);var re=a(O,2);r(B),r(D),W(()=>{p(se,` ${(t(n).Address||"")??""}, ${(t(n).City||"")??""} ${(t(n).State||"")??""}`),p(le,` T${(t(n)["Tank No. "]||"")??""}`)}),f("click",re,()=>y(t(n))),E(L,D)};ce(X,L=>{t(F)[u]&&L(G)})}r(m),W((L,D)=>{ve(m,1,`card ${L??""}`,"svelte-bnejlb"),p(k,D),p(R,`Fuel: ${t(n)["Prevented Delivery "]??""}`),p(v,`Vehicle: ${t(n)["Trailer No."]??""}`),p(I,t(F)[u]?"▲":"▼")},[()=>M(u),()=>De(t(n).Date)==="Just now"?"Just now":`${De(t(n).Date)} `],oe),f("click",m,()=>ue(u)),E(_,m)}),E(e,s)},Dt=e=>{var s=Xt();E(e,s)};ce(_t,e=>{t(d).length>0?e(wt):e(Dt,!1)})}r(Ze),r(Ge),r(Re),r(me);var Ke=a(me,2),Qe=l(Ke),St=a(l(Qe),2);g(St,"src",`${b??""}/images/logo.png`),r(Qe),r(Ke),W(e=>{p(ft,t(N)?"▲":"▼"),Be=ve(Z,1,"search-fields svelte-bnejlb",null,Be,e)},[()=>({visible:t(N)})],oe),f("click",ye,be),J(K,()=>t(o).address,e=>z(o,t(o).address=e)),f("keydown",K,e=>{e.key==="Enter"&&Y()}),J(Q,()=>t(o).state,e=>z(o,t(o).state=e)),f("keydown",Q,e=>{e.key==="Enter"&&Y()}),J(ee,()=>t(o).city,e=>z(o,t(o).city=e)),f("keydown",ee,e=>{e.key==="Enter"&&Y()}),J(te,()=>t(o).trailer,e=>z(o,t(o).trailer=e)),f("keydown",te,e=>{e.key==="Enter"&&Y()}),J(ae,()=>t(o).date,e=>z(o,t(o).date=e)),f("keydown",ae,e=>{e.key==="Enter"&&Y()}),J(je,()=>t(o).fuel,e=>z(o,t(o).fuel=e)),f("click",Oe,Y),f("click",ht,nt),f("click",Ue,ot),f("click",Xe,ct),f("click",mt,dt),E(h,Te),Lt()}export{ua as component,ba as universal};
