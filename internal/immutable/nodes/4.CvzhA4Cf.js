import"../chunks/CWj6FrbW.js";import"../chunks/B44Ua88C.js";import{aj as _e,t as b,ak as D,al as B,a as n,am as ge,aq as je,ar as ye,an as a,l as J,c as t,r as s,k as r,B as E,at as xe,Y as h,au as ke}from"../chunks/CzOC0KzF.js";import{o as Le,h as $e,s as o}from"../chunks/4Px52Ah5.js";import{i as A}from"../chunks/CrFqM1sv.js";import{e as Ue,i as Ie}from"../chunks/CibRLjUn.js";import{s as K}from"../chunks/SS51CJoV.js";import{e as Q}from"../chunks/D1dF0dAw.js";import{i as Me}from"../chunks/DXZuKXJG.js";import{b as c}from"../chunks/BFSXPns0.js";import{g as f}from"../chunks/Bs0QrXiy.js";import{P as Pe}from"../chunks/XVZJVHkn.js";const De=!1,Qe=Object.freeze(Object.defineProperty({__proto__:null,prerender:De},Symbol.toStringTag,{value:"Module"}));var Be=je('<script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"><\/script> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet"> <link rel="stylesheet">',1),Ee=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6">Loading users</td></tr>'),Ae=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6"> </td></tr>'),Ce=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td></tr>'),Se=b('<header><div class="header-container"><div class="top-header"><a class="top-header-link" href="https://berrys.com">berrys.com</a></div> <div class="header"><button class="header-btn svelte-1jdwbw6">Dashboard</button> <button class="header-btn svelte-1jdwbw6">Logout</button></div></div></header> <div class="main-container svelte-1jdwbw6"><div class="dashboard-header svelte-1jdwbw6"><h1 class="svelte-1jdwbw6">Manage users</h1> <div class="date-time"> </div></div> <div class="data-container"><table class="desktop-view svelte-1jdwbw6"><thead class="svelte-1jdwbw6"><tr class="svelte-1jdwbw6"><th class="svelte-1jdwbw6">User ID</th><th class="svelte-1jdwbw6">Full Name</th><th class="svelte-1jdwbw6">Company Name</th><th class="svelte-1jdwbw6">Email</th><th class="svelte-1jdwbw6">Phone Number</th><th class="svelte-1jdwbw6">Is Admin</th><th class="svelte-1jdwbw6">Last Login</th></tr></thead><tbody class="svelte-1jdwbw6"><!></tbody></table></div></div> <footer><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;"><span style="font-size: 1rem; font-family: Mulish;">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo"></div></footer>',1);function Ve(V,W){_e(W,!1);let u=E([]),p=E(null),_=E(!0);function X(e){return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"-")}async function Z(){await f(`${c}/login?authMessage=${encodeURIComponent("You have been logged out.")}`)}async function ee(){h(_,!0),h(p,null);try{const e=await fetch(`${Pe}/api/admin/users`,{credentials:"include"});if(!e.ok)if(e.status===401){await f(`${c}/login?authMessage=${encodeURIComponent("Your session has expired. Please log in again.")}`);return}else if(e.status===403){await f(`${c}/login?authMessage=${encodeURIComponent("Access Denied. You do not have administrator privileges.")}`);return}else{const l=await e.json().catch(()=>({message:"Unknown error occurred."}));throw new Error(l.error||`HTTP Error: ${e.status}`)}h(u,await e.json()),console.log("Admin users loaded:",r(u))}catch(e){console.error("Error fetching admin users:",e),h(p,e.message||"Failed to load users. Please try again.")}finally{h(_,!1)}}Le(async()=>{await ee()}),Me();var C=Se();$e(e=>{var l=Be();ye.title="Manage Users";var x=a(D(l),14);K(x,"href",`${c??""}/css/styles.css`),n(e,l)});var g=D(C),S=t(g),T=a(t(S),2),Y=t(T),te=xe(()=>f(`${c}/admin`)),se=a(Y,2);s(T),s(S),s(g);var j=a(g,2),y=t(j),N=a(t(y),2),ae=t(N,!0);s(N),s(y);var R=a(y,2),F=t(R),q=a(t(F)),re=t(q);{var le=e=>{var l=Ee();n(e,l)},oe=(e,l)=>{{var x=d=>{var v=Ae(),w=t(v),m=t(w,!0);s(w),s(v),B(()=>o(m,r(p))),n(d,v)},de=(d,v)=>{{var w=m=>{var O=ke(),ne=D(O);Ue(ne,1,()=>r(u),Ie,(ce,i)=>{var k=Ce(),L=t(k),ve=t(L,!0);s(L);var $=a(L),me=t($);s($);var U=a($),he=t(U,!0);s(U);var I=a(U),ue=t(I,!0);s(I);var M=a(I),pe=t(M,!0);s(M);var P=a(M),we=t(P,!0);s(P);var H=a(P),fe=t(H,!0);s(H),s(k),B(be=>{o(ve,r(i).user_id),o(me,`${r(i).first_name??""} ${r(i).last_name??""}`),o(he,r(i).company_name),o(ue,r(i).email),o(pe,r(i).phone_number),o(we,r(i).is_admin?"Yes":"No"),o(fe,be)},[()=>X(r(i).last_login)],J),n(ce,k)}),n(m,O)};A(d,m=>{r(u).length>0&&m(w)},v)}};A(e,d=>{r(p)?d(x):d(de,!1)},l)}};A(re,e=>{r(_)?e(le):e(oe,!1)})}s(q),s(F),s(R),s(j);var z=a(j,2),G=t(z),ie=a(t(G),2);K(ie,"src",`${c??""}/images/logo.png`),s(G),s(z),B(e=>o(ae,e),[()=>new Date().toLocaleString()],J),Q("click",Y,function(...e){var l;(l=r(te))==null||l.apply(this,e)}),Q("click",se,Z),n(V,C),ge()}export{Ve as component,Qe as universal};
