import{t as x,a as b,c as is,d as At}from"../chunks/Ddf-pde4.js";import"../chunks/CUbRwKUw.js";import{ae as Bt,x as E,ap as ne,aq as I,ag as Ut,aJ as vs,ar as s,c as r,b as oe,f as t,r as a,l as p,as as ns,aK as te,av as Be}from"../chunks/COAlzTlh.js";import{s as m}from"../chunks/DMAFUHRH.js";import{i as H}from"../chunks/D_Rr-0e8.js";import{e as st,i as at}from"../chunks/HfpreXtq.js";import{h as os}from"../chunks/iCJorLeU.js";import{s as _,c as cs,b as Se,r as ke,a as ds}from"../chunks/C24kGzoz.js";import{e as f}from"../chunks/C8-GFTye.js";import{b as Te}from"../chunks/CZ0ZreRe.js";import{p as Nt}from"../chunks/CWmzcjye.js";import{i as Yt}from"../chunks/1VC0eZX2.js";import{o as ys}from"../chunks/PcSmvWFM.js";import{g as us}from"../chunks/FyuCb5qo.js";import{b as g}from"../chunks/GswKTICK.js";import{g as ps}from"../chunks/CmegmGLq.js";import{p as ms}from"../chunks/WGs1_-KS.js";import{b as fs,a as gs}from"../chunks/CH-qU2yJ.js";import{b as hs}from"../chunks/BYqunLH5.js";import{l as jt,p as ve}from"../chunks/DfO8xPXH.js";import{P as It}from"../chunks/XVZJVHkn.js";const _s=!0,sa=Object.freeze(Object.defineProperty({__proto__:null,prerender:_s},Symbol.toStringTag,{value:"Module"}));function Vt(){const J=document.getElementById("current-datetime");if(J){const y=new Date,K={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};J.textContent=y.toLocaleDateString("en-US",K)}}function bs(){document.querySelectorAll(".search-fields input").forEach(y=>{const K=y.id+"_"+Math.random().toString(36).substring(2,9);y.setAttribute("name",K),(y.id==="State"||y.id==="Zip"||y.id==="Date"||y.id==="ST-address"||y.id==="City"||y.id==="Fuel")&&(y.setAttribute("autocomplete","new-password"),y.setAttribute("data-lpignore","true"),y.setAttribute("data-form-type","other"))})}var qs=x('<div class="dropdown-item svelte-1o6jmi1"> </div>'),Ds=x('<label> </label> <div class="custom-dropdown svelte-1o6jmi1"><div class="input-wrapper svelte-1o6jmi1"><input> <div class="dropdown-arrow svelte-1o6jmi1"></div></div> <div></div></div>',1);function Mt(J,y){const K=jt(y,["children","$$slots","$$events","$$legacy"]),xe=jt(K,["prerender","id","label","placeholder","options","value","onChange"]);Bt(y,!1);let F=ve(y,"id",8,""),S=ve(y,"label",8,""),$e=ve(y,"placeholder",8,"Select or type"),V=ve(y,"options",24,()=>[]),M=ve(y,"value",12,""),B=ve(y,"onChange",8,()=>{});const q=!0;let i=E(!1),A=E(),U=E([...V()]);function se(){p(i,!t(i)),t(i)&&p(U,[...V()])}function Y(h){M(h),B()(h),p(i,!1)}function W(){const h=M().toLowerCase();p(U,V().filter(Z=>Z.toLowerCase().includes(h))),p(i,!0)}function ce(h){t(A)&&!t(A).contains(h.target)&&p(i,!1)}function Ue(h){h.stopPropagation(),p(U,[...V()]),se()}Yt();var P=Ds();f("click",vs,ce);var ae=ne(P),de=r(ae,!0);a(ae);var ye=s(ae,2),ue=r(ye),N=r(ue);ke(N);let pe;var Ye=s(N,2);a(ue);var re=s(ue,2);let le;return st(re,5,()=>t(U),at,(h,Z)=>{var O=qs(),Ce=r(O,!0);a(O),I(()=>m(Ce,t(Z))),f("click",O,()=>Y(t(Z))),b(h,O)}),a(re),a(ye),hs(ye,h=>p(A,h),()=>t(A)),I(h=>{_(ae,"for",F()),m(de,S()),pe=cs(N,pe,{id:F(),type:"text",placeholder:$e(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",...xe},"svelte-1o6jmi1"),le=Se(re,1,"dropdown-content svelte-1o6jmi1",null,le,h)},[()=>({show:t(i)})],oe),Te(N,M),f("input",N,W),f("focus",N,()=>{p(U,[...V()]),p(i,!0)}),f("keydown",N,function(h){gs.call(this,y,h)}),f("click",Ye,Ue),b(J,P),fs(y,"prerender",q),Ut({prerender:q})}var ws=is('<meta charset="UTF-8" class="svelte-1sv4qry"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-1sv4qry"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-1sv4qry"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-1sv4qry"> <link rel="stylesheet" class="svelte-1sv4qry"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-1sv4qry"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-1sv4qry"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-1sv4qry"><\/script>',1),Ss=x('<tr class="svelte-1sv4qry"><td colspan="5" style="text-align: center; padding: 20px;" class="svelte-1sv4qry">Loading events...</td></tr>'),ks=x('<tr class="svelte-1sv4qry"><td colspan="5" style="text-align: center; padding: 20px; color: red;" class="svelte-1sv4qry"> </td></tr>'),Ts=x('<tr><td colspan="4" class="details-cell svelte-1sv4qry"><div class="details-header svelte-1sv4qry">Details:</div> <div class="details-content svelte-1sv4qry"><div class="detail-row svelte-1sv4qry"> </div> <div class="detail-row svelte-1sv4qry"><span class="label svelte-1sv4qry">Trailer No.:</span> </div> <div class="detail-row svelte-1sv4qry"><span class="label svelte-1sv4qry">Full Address:</span> </div> <div class="detail-row svelte-1sv4qry"><span class="label svelte-1sv4qry">Product:</span> <span class="label svelte-1sv4qry">Tank:</span> </div></div></td><td class="svelte-1sv4qry"><button class="more-details svelte-1sv4qry">View Vehicle Timeline</button></td></tr>'),xs=x('<tr><td class="svelte-1sv4qry"> </td><td class="svelte-1sv4qry"> </td><td class="svelte-1sv4qry"> </td><td class="svelte-1sv4qry"> </td><td class="svelte-1sv4qry"> </td></tr> <!>',1),$s=x('<tr class="svelte-1sv4qry"><td colspan="5" style="text-align: center; padding: 20px;" class="svelte-1sv4qry">No results found</td></tr>'),Cs=x('<div class="loading-message svelte-1sv4qry" style="text-align: center;">Loading events...</div>'),Ls=x('<div class="error-message svelte-1sv4qry" style="text-align: center;"> </div>'),Es=x('<div class="card-details svelte-1sv4qry"><hr class="svelte-1sv4qry"> <div class="details-header svelte-1sv4qry">Details:</div> <div class="details-content svelte-1sv4qry"><div class="detail-row svelte-1sv4qry"> </div> <div class="detail-row svelte-1sv4qry"><span class="label svelte-1sv4qry">Trailer No:</span> </div> <div class="detail-row svelte-1sv4qry"><span class="label svelte-1sv4qry">Full Address:</span> </div> <div class="detail-row svelte-1sv4qry"><span class="label svelte-1sv4qry">Product:</span> <span class="label svelte-1sv4qry">Tank:</span> </div> <button class="more-details mobile-details-btn svelte-1sv4qry">View Vehicle Timeline</button></div></div>'),Ps=x('<div><div class="card-header svelte-1sv4qry"><div class="card-item svelte-1sv4qry"><span class="card-label svelte-1sv4qry"> </span></div> <div class="card-item svelte-1sv4qry"><span class="card-value svelte-1sv4qry" style="margin-left: 2vw;"> </span> <span class="card-value svelte-1sv4qry" style="margin-left: 2vw;"> </span> <span class="card-value svelte-1sv4qry" style="position: relative;margin-left:auto"> </span></div></div> <!></div>'),Fs=x('<div class="no-results svelte-1sv4qry" style="text-align: center;">No results found</div>'),As=x(`<header class="svelte-1sv4qry"><div class="header-container svelte-1sv4qry"><div class="top-header svelte-1sv4qry"><a class="top-header-link svelte-1sv4qry" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-1sv4qry" href=" ">Contact Us</a></div> <div class="header svelte-1sv4qry"><div class="header-background svelte-1sv4qry"></div> <div class="hamburger-menu svelte-1sv4qry" id="hamburger-menu"><span class="svelte-1sv4qry"></span> <span class="svelte-1sv4qry"></span> <span class="svelte-1sv4qry"></span></div> <a class="svelte-1sv4qry">Home</a> <a class="svelte-1sv4qry">Inventory</a> <a class="svelte-1sv4qry">Cross-Drop Prevention</a> <a class="svelte-1sv4qry">Site Data</a> <a class="svelte-1sv4qry">Analytics</a> <input type="text" placeholder="Search..." class="svelte-1sv4qry"> <img alt="Berrys Logo" class="svelte-1sv4qry"></div></div></header> <div class="mobile-sidebar svelte-1sv4qry" id="mobile-sidebar"><a class="svelte-1sv4qry">Home</a> <a class="svelte-1sv4qry">Vehicle Logging</a> <a class="svelte-1sv4qry">Cross-Drop Prevention</a> <a class="svelte-1sv4qry">Site Data</a> <a class="svelte-1sv4qry">Inventory</a> <a class="svelte-1sv4qry">Analytics</a> <span class="footer-text svelte-1sv4qry">Contact Us <br class="svelte-1sv4qry"> Berrys Technologies Ltd 141 Lichfield Road, Birmingham , B6 5SP , United Kingdom <br class="svelte-1sv4qry"> 0121 558 4411 <br class="svelte-1sv4qry"> enquiries@berrys.com</span></div> <div class="overlay svelte-1sv4qry" id="overlay"></div> <div class="sub-header-container svelte-1sv4qry"><div class="sub-header svelte-1sv4qry"><img alt="Truck Graphic" class="subheader-image svelte-1sv4qry"> <h1 class="svelte-1sv4qry">Vehicle Logging</h1> <span class="svelte-1sv4qry">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-1sv4qry"><a class="svelte-1sv4qry">Home</a> / <span class="svelte-1sv4qry">Vehicle Logging</span></div></div> <main class="vehicle-logging-page svelte-1sv4qry"><div class="main-container svelte-1sv4qry"><button class="toggle-search-btn svelte-1sv4qry"><label for="search-fields" class="search-label svelte-1sv4qry">Search <span style="font-size:1rem" class="svelte-1sv4qry"> </span></label></button> <div><label for="ST-address" class="svelte-1sv4qry">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-1sv4qry"> <!> <!> <label for="Trailer_No" class="svelte-1sv4qry">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-1sv4qry"> <label for="Date" class="svelte-1sv4qry">Date</label> <input type="date" id="Date" name="Date" placeholder="YYYY-MM-DD" class="svelte-1sv4qry"> <label for="Fuel" class="svelte-1sv4qry">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-1sv4qry"> <div class="button-container svelte-1sv4qry"><button class="search-button svelte-1sv4qry">Search</button> <button class="clear-button svelte-1sv4qry">Clear</button></div></div> <div class="table-header svelte-1sv4qry"><div class="live-status svelte-1sv4qry"><div class="toggle-live svelte-1sv4qry"><label for="table-type" class="table-type svelte-1sv4qry">LIVE <span class="live-indicator svelte-1sv4qry"></span></label></div> <label for="table-type" class="table-type svelte-1sv4qry"><span id="current-datetime" class="current-time svelte-1sv4qry"></span></label></div> <div class="export-dropdown svelte-1sv4qry"><button class="export-button svelte-1sv4qry">Export As ▼</button> <div class="dropdown-content svelte-1sv4qry" id="exportDropdown"><a href=" " class="svelte-1sv4qry">CSV</a> <a href=" " class="svelte-1sv4qry">PDF</a></div></div></div> <div class="data-container svelte-1sv4qry"><table class="desktop-view svelte-1sv4qry"><thead class="svelte-1sv4qry"><tr class="svelte-1sv4qry"><th class="svelte-1sv4qry">Date</th><th class="svelte-1sv4qry">Time</th><th class="svelte-1sv4qry">City</th><th class="svelte-1sv4qry">Vehicle ID</th><th class="svelte-1sv4qry">Prevented Delivery</th></tr></thead><tbody class="svelte-1sv4qry"><!></tbody></table> <div class="mobile-card-view svelte-1sv4qry"><!></div></div></div></main> <footer class="svelte-1sv4qry"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-1sv4qry"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-1sv4qry">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-1sv4qry"></div></footer>`,1);function aa(J,y){Bt(y,!1);const K=us(ms).url.pathname;function xe(e){ps(`${g}/vehicle/${e["Trailer No."]}`,{state:{from:K,trailer:e["Trailer No."]}})}let F=[],S=E([]),$e=E([]),V=E([]),M=E(!0),B=E(null),q=E([]),i=E({address:"",state:"",city:"",trailer:"",date:"",fuel:""}),A=E(!1);async function U(){try{p(M,!0),p(B,null),console.log("Fetching prevented delivery events from API...");const e=await fetch(`${It}/api/Vehicle_Logging`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const l=await e.json();console.log("Prevented Delivery Events Data Loaded:",l),F=l,p(S,[...F]),p(V,[...new Set(F.map(v=>v.State).filter(v=>v&&v.trim()!==""))]),p($e,[...new Set(F.map(v=>v.City).filter(v=>v&&v.trim()!==""))]),p(q,Array(t(S).length).fill(!1)),le(!0)}catch(e){console.error("Error fetching prevented delivery events:",e),p(B,"Failed to load prevented delivery events data. Please try again.")}finally{p(M,!1)}}function se(e){if(!e)return"";const[l,v,D]=e.split("."),o=new Date(D,v-1,l);if(isNaN(o.getTime()))return e;const d=new Date;if((d-o)/(1e3*60)<=30)return"Just now";if(o.getDate()===d.getDate()&&o.getMonth()===d.getMonth()&&o.getFullYear()===d.getFullYear())return"Today";const u=new Date(d);if(u.setDate(d.getDate()-1),o.getDate()===u.getDate()&&o.getMonth()===u.getMonth()&&o.getFullYear()===u.getFullYear())return"Yesterday";const n=new Date(d);if(n.setDate(d.getDate()-2),o.getDate()===n.getDate()&&o.getMonth()===n.getMonth()&&o.getFullYear()===n.getFullYear())return"Two days ago";const k={year:"numeric",month:"long",day:"numeric"};return o.toLocaleDateString("en-US",k)}function Y(e){return typeof e!="number"||isNaN(e)?"":new Date(e*1e3).toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit",year:"numeric"}).replace(/\//g,".")}function W(e){return typeof e!="number"||isNaN(e)?"":new Date(e*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function ce(e){return e%2===0?"row-even":"row-odd"}function Ue(){p(A,!t(A))}function P(){p(S,F.filter(e=>{const l=!t(i).address||e.Address&&e.Address.toLowerCase().includes(t(i).address.toLowerCase()),v=!t(i).state||e.State&&e.State.toLowerCase().includes(t(i).state.toLowerCase()),D=!t(i).city||e.City&&e.City.toLowerCase().includes(t(i).city.toLowerCase()),o=!t(i).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(i).trailer.toLowerCase()),d=e.event_timestamp?new Date(e.event_timestamp*1e3).toISOString().split("T")[0]:"",w=!t(i).date||d&&d.includes(t(i).date),$=!t(i).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(i).fuel.toLowerCase());return l&&v&&D&&o&&w&&$})),p(q,Array(t(S).length).fill(!1)),le()}function ae(){console.log("Clearing search parameters."),p(i,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),p(S,[...F]),p(q,Array(t(S).length).fill(!1)),le(!0)}function de(e){te(q,t(q)[e]=!t(q)[e]),p(q,t(q))}function ye(){document.getElementById("exportDropdown").classList.toggle("show")}function ue(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(l=>l.value.trim()!=="")}function N(){let e=[];const l=["Date","Time","City","Vehicle ID","Prevented Delivery","Address","State","Tank No."];e.push(l.join(",")),t(S).forEach(n=>{const k=Y(n.event_timestamp),z=W(n.event_timestamp),c=[`"${k}"`,`"${z}"`,`"${n.City||""}"`,`"${n["Trailer No."]||""}"`,`"${n["Prevented Delivery "]||""}"`,`"${n.Address||""}"`,`"${n.State||""}"`,`"T${n.tank_number||""}"`];e.push(c.join(","))});const v=e.join(`
`),D=new Blob([v],{type:"text/csv;charset=utf-8;"}),o=new Date,d=o.toISOString().split("T")[0],w=o.toTimeString().split(" ")[0].replace(/:/g,"-"),u=`vehicle_logging_${d}_${w}.csv`;if("showSaveFilePicker"in window){async function n(){try{const z=await(await window.showSaveFilePicker({suggestedName:u,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await z.write(D),await z.close()}catch(k){k.name!=="AbortError"&&pe(D,u)}}n()}else pe(D,u)}function pe(e,l){const v=document.createElement("a");v.href=URL.createObjectURL(e),v.setAttribute("download",l),document.body.appendChild(v),v.click(),document.body.removeChild(v)}async function Ye(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const l=new e;l.setFont("helvetica","bold"),l.setFontSize(16),l.text("Vehicle Logging Data",14,15);const v=new Date().toLocaleString();l.setFontSize(10),l.setFont("helvetica","normal"),l.text(`Generated: ${v}`,14,25);const D=["Date","Time","City","Vehicle ID","Prevented Delivery","Address","State","Tank No."],o=t(S).map(n=>[Y(n.event_timestamp),W(n.event_timestamp),n.City||"",n["Trailer No."]||"",n["Prevented Delivery "]||"",n.Address||"",n.State||"",`T${n.tank_number||""}`]);l.autoTable({head:[D],body:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const d=new Date,w=d.toISOString().split("T")[0],$=d.toTimeString().split(" ")[0].replace(/:/g,"-"),u=`vehicle_logging_${w}_${$}.pdf`;if("showSaveFilePicker"in window)try{const k=await(await window.showSaveFilePicker({suggestedName:u,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await k.write(l.output("blob")),await k.close()}catch(n){console.error("File save error:",n),re(l,u)}else re(l,u);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function re(e,l){e.save(l)}function le(e=!1){const l=document.querySelector(".toggle-live");l&&(!e&&ue()?l.style.display="none":l.style.display="block")}function h(){const e=document.getElementById("hamburger-menu"),l=document.getElementById("mobile-sidebar"),v=document.getElementById("overlay");e&&l&&v&&(e.addEventListener("click",function(){l.classList.toggle("active"),v.style.display=l.classList.contains("active")?"block":"none"}),v.addEventListener("click",function(){l.classList.remove("active"),v.style.display="none"}),l.querySelectorAll("a").forEach(o=>{o.addEventListener("click",function(){l.classList.remove("active"),v.style.display="none"})}))}ys(async()=>{h(),Vt(),bs();const e=new EventSource(`${It}/api/events/subscribe`);e.onopen=()=>{console.log("Connected to SSE stream.")},e.addEventListener("dataUpdate",v=>{console.log("Received SSE update:",v.data),JSON.parse(v.data).type==="vehicleLogging"&&(console.log("Vehicle Logging data changed via SSE, re-fetching..."),U())}),e.onerror=v=>{console.error("SSE connection error:",v),e.close()},await U();const l=setInterval(Vt,1e3);return()=>{e.close(),console.log("SSE connection closed."),clearInterval(l)}}),Yt();var Z=As();os(e=>{var l=ws();ns.title="Vehicle Logging";var v=s(ne(l),8);_(v,"href",`${g??""}/css/styles.css`),Be(6),b(e,l)});var O=ne(Z),Ce=r(O),rt=s(r(Ce),2),lt=r(rt);ds(lt,`background: url(${g??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${g??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${g??""}/svg/Vector_1.svg);`);var it=s(lt,4);_(it,"href",`${g??""}/home`);var vt=s(it,2);_(vt,"href",`${g??""}/inventory`);var nt=s(vt,2);_(nt,"href",`${g??""}/cross-drops`);var ot=s(nt,2);_(ot,"href",`${g??""}/site-data`);var ct=s(ot,2);_(ct,"href",`${g??""}/analytics`);var Ot=s(ct,4);_(Ot,"src",`${g??""}/images/Midas_Link_logo.png`),a(rt),a(Ce),a(O);var Oe=s(O,2),dt=r(Oe);_(dt,"href",`${g??""}/home`);var yt=s(dt,2);_(yt,"href",`${g??""}/vehicle-logging`);var ut=s(yt,2);_(ut,"href",`${g??""}/cross-drops`);var pt=s(ut,2);_(pt,"href",`${g??""}/site-data`);var mt=s(pt,2);_(mt,"href",`${g??""}/inventory`);var zt=s(mt,2);_(zt,"href",`${g??""}/analytics`),Be(2),a(Oe);var ze=s(Oe,4),Re=r(ze),Rt=r(Re);_(Rt,"src",`${g??""}/images/Truck_graphic.png`),Be(4),a(Re);var ft=s(Re,2),Gt=r(ft);_(Gt,"href",`${g??""}/home`),Be(2),a(ft),a(ze);var Ge=s(ze,2),gt=r(Ge),Le=r(gt),ht=r(Le),_t=s(r(ht)),Ht=r(_t,!0);a(_t),a(ht),a(Le);var Ee=s(Le,2);let bt;var Pe=s(r(Ee),2);ke(Pe);var qt=s(Pe,2);Mt(qt,{id:"State",label:"State",get options(){return t(V)},get value(){return t(i).state},set value(e){te(i,t(i).state=e)},$$events:{keydown:e=>{e.key==="Enter"&&P()}},$$legacy:!0});var Dt=s(qt,2);Mt(Dt,{id:"City",label:"City",get options(){return t($e)},get value(){return t(i).city},set value(e){te(i,t(i).city=e)},$$events:{keydown:e=>{e.key==="Enter"&&P()}},$$legacy:!0});var Fe=s(Dt,4);ke(Fe);var Ae=s(Fe,4);ke(Ae);var Ne=s(Ae,4);ke(Ne);var wt=s(Ne,2),St=r(wt),Jt=s(St,2);a(wt),a(Ee);var He=s(Ee,2),kt=s(r(He),2),Tt=r(kt),xt=s(Tt,2),$t=r(xt),Kt=s($t,2);a(xt),a(kt),a(He);var Ct=s(He,2),Je=r(Ct),Lt=s(r(Je)),Wt=r(Lt);{var Zt=e=>{var l=Ss();b(e,l)},Qt=(e,l)=>{{var v=o=>{var d=ks(),w=r(d),$=r(w,!0);a(w),a(d),I(()=>m($,t(B))),b(o,d)},D=(o,d)=>{{var w=u=>{var n=At(),k=ne(n);st(k,1,()=>t(S),at,(z,c,C)=>{var R=xs(),j=ne(R),Q=r(j),je=r(Q,!0);a(Q);var me=s(Q),Ie=r(me,!0);a(me);var X=s(me),Ke=r(X,!0);a(X);var ee=s(X),We=r(ee,!0);a(ee);var fe=s(ee),Ze=r(fe,!0);a(fe),a(j);var Qe=s(j,2);{var Xe=L=>{var T=Ts(),G=r(T),ie=s(r(G),2),ge=r(ie),he=r(ge);a(ge);var _e=s(ge,2),be=s(r(_e));a(_e);var qe=s(_e,2),De=s(r(qe));a(qe);var we=s(qe,2),Ve=s(r(we)),et=s(Ve,2);a(we),a(ie),a(G);var Me=s(G),tt=r(Me);a(Me),a(T),I((as,rs,ls)=>{Se(T,1,`details-row ${as??""}`,"svelte-1sv4qry"),m(he,`${rs??""} |
                        ${ls??""}`),m(be,` ${t(c)["Trailer No."]??""}`),m(De,` ${(t(c).Address||"")??""}, ${t(c).City??""}
                        ${t(c).State??""}`),m(Ve,` ${(t(c)["Prevented Delivery "]||t(c).Delivered||"")??""} | `),m(et,` T${(t(c).tank_number||"")??""}`)},[()=>ce(C),()=>se(Y(t(c).event_timestamp)),()=>W(t(c).event_timestamp)],oe),f("click",tt,()=>xe(t(c))),f("click",T,()=>de(C)),b(L,T)};H(Qe,L=>{t(q)[C]&&L(Xe)})}I((L,T,G)=>{Se(j,1,`main-row ${L??""} ${t(q)[C]?"hover-row":""}`,"svelte-1sv4qry"),m(je,T),m(Ie,G),m(Ke,t(c).City),m(We,t(c)["Trailer No."]),m(Ze,t(c)["Prevented Delivery "]||t(c).Delivered)},[()=>ce(C),()=>se(Y(t(c).event_timestamp)),()=>W(t(c).event_timestamp)],oe),f("click",j,()=>de(C)),b(z,R)}),b(u,n)},$=u=>{var n=$s();b(u,n)};H(o,u=>{t(S).length>0?u(w):u($,!1)},d)}};H(e,o=>{t(B)?o(v):o(D,!1)},l)}};H(Wt,e=>{t(M)?e(Zt):e(Qt,!1)})}a(Lt),a(Je);var Et=s(Je,2),Xt=r(Et);{var es=e=>{var l=Cs();b(e,l)},ts=(e,l)=>{{var v=o=>{var d=Ls(),w=r(d,!0);a(d),I(()=>m(w,t(B))),b(o,d)},D=(o,d)=>{{var w=u=>{var n=At(),k=ne(n);st(k,1,()=>t(S),at,(z,c,C)=>{var R=Ps(),j=r(R),Q=r(j),je=r(Q),me=r(je,!0);a(je),a(Q);var Ie=s(Q,2),X=r(Ie),Ke=r(X);a(X);var ee=s(X,2),We=r(ee);a(ee);var fe=s(ee,2),Ze=r(fe,!0);a(fe),a(Ie),a(j);var Qe=s(j,2);{var Xe=L=>{var T=Es(),G=s(r(T),4),ie=r(G),ge=r(ie);a(ie);var he=s(ie,2),_e=s(r(he));a(he);var be=s(he,2),qe=s(r(be));a(be);var De=s(be,2),we=s(r(De)),Ve=s(we,2);a(De);var et=s(De,2);a(G),a(T),I((Me,tt)=>{m(ge,`${Me??""} | ${tt??""}`),m(_e,` ${t(c)["Trailer No."]??""}`),m(qe,` ${(t(c).Address||"")??""}, ${(t(c).City||"")??""}
                      ${(t(c).State||"")??""}`),m(we,` ${(t(c)["Prevented Delivery "]||t(c).Delivered||"")??""} `),m(Ve,` T${(t(c).tank_number||"")??""}`)},[()=>se(Y(t(c).event_timestamp)),()=>W(t(c).event_timestamp)],oe),f("click",et,()=>xe(t(c))),b(L,T)};H(Qe,L=>{t(q)[C]&&L(Xe)})}a(R),I((L,T)=>{Se(R,1,`card ${L??""}`,"svelte-1sv4qry"),m(me,T),m(Ke,`Product: ${(t(c)["Prevented Delivery "]||t(c).Delivered)??""}`),m(We,`Vehicle: ${t(c)["Trailer No."]??""}`),m(Ze,t(q)[C]?"▲":"▼")},[()=>ce(C),()=>se(Y(t(c).event_timestamp))],oe),f("click",R,()=>de(C)),b(z,R)}),b(u,n)},$=u=>{var n=Fs();b(u,n)};H(o,u=>{t(S).length>0?u(w):u($,!1)},d)}};H(e,o=>{t(B)?o(v):o(D,!1)},l)}};H(Xt,e=>{t(M)?e(es):e(ts,!1)})}a(Et),a(Ct),a(gt),a(Ge);var Pt=s(Ge,2),Ft=r(Pt),ss=s(r(Ft),2);_(ss,"src",`${g??""}/images/logo.png`),a(Ft),a(Pt),I(e=>{m(Ht,t(A)?"▲":"▼"),bt=Se(Ee,1,"search-fields svelte-1sv4qry",null,bt,e)},[()=>({visible:t(A)})],oe),f("click",Le,Ue),Te(Pe,()=>t(i).address,e=>te(i,t(i).address=e)),f("keydown",Pe,e=>{e.key==="Enter"&&P()}),Te(Fe,()=>t(i).trailer,e=>te(i,t(i).trailer=e)),f("keydown",Fe,e=>{e.key==="Enter"&&P()}),Te(Ae,()=>t(i).date,e=>te(i,t(i).date=e)),f("keydown",Ae,e=>{e.key==="Enter"&&P()}),Te(Ne,()=>t(i).fuel,e=>te(i,t(i).fuel=e)),f("keydown",Ne,e=>{e.key==="Enter"&&P()}),f("click",St,P),f("click",Jt,ae),f("click",Tt,ye),f("click",$t,Nt(N)),f("click",Kt,Nt(Ye)),b(J,Z),Ut()}export{aa as component,sa as universal};
