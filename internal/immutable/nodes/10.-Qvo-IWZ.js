import{t as g,a as m}from"../chunks/B8AjNrGC.js";import"../chunks/D34AsAzw.js";import{an as ae,as as se,at as te,ap as re,aq as $,j as o,ao as oe,au as ie,c as t,ar as l,W as s,z as f,av as F,r}from"../chunks/CERrcAZ7.js";import{h as le,s as k}from"../chunks/CEIkUs5_.js";import{i as N}from"../chunks/BIbRKX5X.js";import{a as x,s as P,r as R}from"../chunks/BHjRODUC.js";import{e as ne}from"../chunks/CV8IrTpd.js";import{b as J}from"../chunks/BDd58mOU.js";import{p as fe}from"../chunks/CWmzcjye.js";import{i as de}from"../chunks/2z9SFfgS.js";import{s as ce,a as pe}from"../chunks/DXuiFF4o.js";import{o as ve}from"../chunks/B_PGvOcg.js";import{b as d}from"../chunks/29j6_VHu.js";import{P as me}from"../chunks/XVZJVHkn.js";import{g as ge}from"../chunks/C1EOngRy.js";import{p as ue}from"../chunks/DqXbx1Xk.js";new TextEncoder;const be=!1,ze=Object.freeze(Object.defineProperty({__proto__:null,prerender:be},Symbol.toStringTag,{value:"Module"}));var _e=g('<meta charset="UTF-8" class="svelte-bqdffa"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-bqdffa"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-bqdffa"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-bqdffa">',1),qe=g('<p class="svelte-bqdffa"> </p>'),he=g('<p style="color: red;" class="svelte-bqdffa"> </p>'),ye=g(`<div class="body-container svelte-bqdffa"><img class="midas-link-logo svelte-bqdffa" alt="logo"> <main class="svelte-bqdffa"><div class="content svelte-bqdffa"><div class="sign-in-container svelte-bqdffa"><form class="sign-in-form svelte-bqdffa"><!> <!> <p class="sign-in-title svelte-bqdffa">Sign in to your account</p> <div class="form-group svelte-bqdffa"><label for="email" class="svelte-bqdffa">Your email</label> <input type="email" id="email" name="email" placeholder="email@domain.com" required class="svelte-bqdffa"></div> <div class="form-group svelte-bqdffa"><label for="password" class="svelte-bqdffa">Password</label> <input type="password" id="password" name="password" placeholder="•••••••••" required class="svelte-bqdffa"></div> <div class="form-group below-password-container svelte-bqdffa"><label class="checkbox-container svelte-bqdffa"><input type="checkbox" name="remember" class="svelte-bqdffa"> <span class="checkmark svelte-bqdffa"></span> Remember me</label> <a href=" " class="forgot-password svelte-bqdffa">Forgot Password?</a></div> <button type="submit" class="sign-in-button svelte-bqdffa">Sign In</button> <div class="no-account svelte-bqdffa">Don't have an account? <a class="sign-up-link svelte-bqdffa">Sign up</a></div></form> <div id="popup" class="popup svelte-bqdffa"><div class="popup-content svelte-bqdffa"><p id="popup-message" class="svelte-bqdffa"> </p> <div id="loading-indicator" class="loading-indicator svelte-bqdffa"><p class="svelte-bqdffa">Loading...</p> <div class="spinner svelte-bqdffa"></div></div></div></div></div></div></main></div> <footer class="svelte-bqdffa"><img alt="logo" class="svelte-bqdffa"></footer>`,1);function Be(W,Y){ae(Y,!1);const[G,H]=ce(),S=()=>pe(ue,"$page",G),u=f();let b=f(""),_=f(""),i=f(""),c=f(!1),q=f(!1);async function K(){s(i,""),s(c,!1),s(q,!1);try{const e=await fetch(`${me}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:o(b),password:o(_)})}),a=await e.json();if(e.ok){s(i,a.message||"Logged in successfully."),s(c,!1),s(q,!0),localStorage.setItem("is_admin",a.isAdmin?"true":"false");const n=a.isAdmin?`${d}/admin`:`${d}/home`;setTimeout(()=>{ge(n)},2e3)}else e.status===429?s(i,a.error):e.status===400?s(i,a.error.map(n=>n.msg).join(`
 & `)):e.status===401?s(i,a.error):s(i,`An unexpected login error occured. Status: ${e.status}.`),s(c,!0)}catch(e){console.error("Client-side login error:",e),s(i,"Network error or server unreachable. Please check your connection."),s(c,!0)}}ve(()=>{}),se(()=>S(),()=>{s(u,S().url.searchParams.get("authMessage")||"")}),te(),de();var L=ye();le(e=>{var a=_e();ie.title="Login",F(6),m(e,a)});var p=re(L);x(p,`background-image: url(${d??""}/images/Sign-in-page.jpg)`);var j=t(p);P(j,"src",`${d??""}/images/Midas_Link_logo.png`);var M=l(j,2),T=t(M),A=t(T),v=t(A),I=t(v);{var Q=e=>{var a=qe(),n=t(a,!0);r(a),$(()=>{x(a,`color: ${o(c)?"red":"green"};`),k(n,o(i))}),m(e,a)};N(I,e=>{o(i)&&e(Q)})}var E=l(I,2);{var V=e=>{var a=he(),n=t(a,!0);r(a),$(()=>k(n,o(u))),m(e,a)};N(E,e=>{o(u)&&e(V)})}var h=l(E,4),O=l(t(h),2);R(O),r(h);var y=l(h,2),C=l(t(y),2);R(C),r(y);var U=l(y,6),X=l(t(U));P(X,"href",`${d??""}/register`),r(U),r(v);var w=l(v,2),z=t(w),B=t(z),Z=t(B);r(B),F(2),r(z),r(w),r(A),r(T),r(M),r(p);var D=l(p,2),ee=t(D);P(ee,"src",`${d??""}/images/logo.png`),r(D),$(()=>{x(w,`display: ${o(q)?"flex":"none"};`),k(Z,`✅ ${o(i)??""}`)}),J(O,()=>o(b),e=>s(b,e)),J(C,()=>o(_),e=>s(_,e)),ne("submit",v,fe(K)),m(W,L),oe(),H()}export{Be as component,ze as universal};
