import{R as ae,g as te}from"../chunks/D1sbGnYh.js";import{t as b,a as u}from"../chunks/B8AjNrGC.js";import"../chunks/D34AsAzw.js";import{an as re,as as oe,at as ie,ap as le,aq as S,j as o,ao as ne,au as fe,c as t,ar as l,W as a,z as c,av as J,r}from"../chunks/CERrcAZ7.js";import{h as de,s as x}from"../chunks/CEIkUs5_.js";import{i as W}from"../chunks/BIbRKX5X.js";import{a as P,s as L,r as Y}from"../chunks/BHjRODUC.js";import{e as ce}from"../chunks/CV8IrTpd.js";import{b as G}from"../chunks/BDd58mOU.js";import{p as pe}from"../chunks/CWmzcjye.js";import{i as ve}from"../chunks/2z9SFfgS.js";import{s as me,a as ge}from"../chunks/DXuiFF4o.js";import{o as ue}from"../chunks/B_PGvOcg.js";import{b as p}from"../chunks/B50cuaQN.js";import{P as be}from"../chunks/XVZJVHkn.js";import{p as _e}from"../chunks/BHeSvFlx.js";function H(d,n){throw new ae(d,n.toString())}new TextEncoder;const he=!1;async function qe({url:d,data:n}){if(n&&n.user)throw n.user.isAdmin?H(302,`${d.base}/admin`):H(302,`${d.base}/home`);return{}}const De=Object.freeze(Object.defineProperty({__proto__:null,load:qe,prerender:he},Symbol.toStringTag,{value:"Module"}));var ye=b('<meta charset="UTF-8" class="svelte-bqdffa"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-bqdffa"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-bqdffa"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-bqdffa">',1),we=b('<p class="svelte-bqdffa"> </p>'),$e=b('<p style="color: red;" class="svelte-bqdffa"> </p>'),ke=b(`<div class="body-container svelte-bqdffa"><img class="midas-link-logo svelte-bqdffa" alt="logo"> <main class="svelte-bqdffa"><div class="content svelte-bqdffa"><div class="sign-in-container svelte-bqdffa"><form class="sign-in-form svelte-bqdffa"><!> <!> <p class="sign-in-title svelte-bqdffa">Sign in to your account</p> <div class="form-group svelte-bqdffa"><label for="email" class="svelte-bqdffa">Your email</label> <input type="email" id="email" name="email" placeholder="email@domain.com" required class="svelte-bqdffa"></div> <div class="form-group svelte-bqdffa"><label for="password" class="svelte-bqdffa">Password</label> <input type="password" id="password" name="password" placeholder="•••••••••" required class="svelte-bqdffa"></div> <div class="form-group below-password-container svelte-bqdffa"><label class="checkbox-container svelte-bqdffa"><input type="checkbox" name="remember" class="svelte-bqdffa"> <span class="checkmark svelte-bqdffa"></span> Remember me</label> <a href=" " class="forgot-password svelte-bqdffa">Forgot Password?</a></div> <button type="submit" class="sign-in-button svelte-bqdffa">Sign In</button> <div class="no-account svelte-bqdffa">Don't have an account? <a class="sign-up-link svelte-bqdffa">Sign up</a></div></form> <div id="popup" class="popup svelte-bqdffa"><div class="popup-content svelte-bqdffa"><p id="popup-message" class="svelte-bqdffa"> </p> <div id="loading-indicator" class="loading-indicator svelte-bqdffa"><p class="svelte-bqdffa">Loading...</p> <div class="spinner svelte-bqdffa"></div></div></div></div></div></div></main></div> <footer class="svelte-bqdffa"><img alt="logo" class="svelte-bqdffa"></footer>`,1);function Fe(d,n){re(n,!1);const[j,K]=me(),M=()=>ge(_e,"$page",j),_=c();let h=c(""),q=c(""),i=c(""),v=c(!1),y=c(!1);async function Q(){a(i,""),a(v,!1),a(y,!1);try{const e=await fetch(`${be}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:o(h),password:o(q)})}),s=await e.json();if(e.ok){a(i,s.message||"Logged in successfully."),a(v,!1),a(y,!0),localStorage.setItem("is_admin",s.isAdmin?"true":"false");const f=s.isAdmin?`${p}/admin`:`${p}/home`;setTimeout(()=>{te(f)},2e3)}else e.status===429?a(i,s.error):e.status===400?a(i,s.error.map(f=>f.msg).join(`
 & `)):e.status===401?a(i,s.error):a(i,`An unexpected login error occured. Status: ${e.status}.`),a(v,!0)}catch(e){console.error("Client-side login error:",e),a(i,"Network error or server unreachable. Please check your connection."),a(v,!0)}}ue(()=>{}),oe(()=>M(),()=>{a(_,M().url.searchParams.get("authMessage")||"")}),ie(),ve();var A=ke();de(e=>{var s=ye();fe.title="Login",J(6),u(e,s)});var m=le(A);P(m,`background-image: url(${p??""}/images/Sign-in-page.jpg)`);var T=t(m);L(T,"src",`${p??""}/images/Midas_Link_logo.png`);var I=l(T,2),E=t(I),O=t(E),g=t(O),R=t(g);{var V=e=>{var s=we(),f=t(s,!0);r(s),S(()=>{P(s,`color: ${o(v)?"red":"green"};`),x(f,o(i))}),u(e,s)};W(R,e=>{o(i)&&e(V)})}var C=l(R,2);{var X=e=>{var s=$e(),f=t(s,!0);r(s),S(()=>x(f,o(_))),u(e,s)};W(C,e=>{o(_)&&e(X)})}var w=l(C,4),U=l(t(w),2);Y(U),r(w);var $=l(w,2),z=l(t($),2);Y(z),r($);var B=l($,6),Z=l(t(B));L(Z,"href",`${p??""}/register`),r(B),r(g);var k=l(g,2),D=t(k),F=t(D),ee=t(F);r(F),J(2),r(D),r(k),r(O),r(E),r(I),r(m);var N=l(m,2),se=t(N);L(se,"src",`${p??""}/images/logo.png`),r(N),S(()=>{P(k,`display: ${o(y)?"flex":"none"};`),x(ee,`✅ ${o(i)??""}`)}),G(U,()=>o(h),e=>a(h,e)),G(z,()=>o(q),e=>a(q,e)),ce("submit",g,pe(Q)),u(d,A),ne(),K()}export{Fe as component,De as universal};
