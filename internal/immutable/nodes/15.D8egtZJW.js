import"../chunks/CWj6FrbW.js";import"../chunks/B44Ua88C.js";import{aj as Yt,B as P,t as $,ak as oe,al as V,a as b,am as Ut,aW as ia,an as a,c as l,l as ce,k as t,r as s,Y as p,aq as na,ar as oa,aX as te,as as Ye,au as Nt}from"../chunks/CzOC0KzF.js";import{s as m,o as ca,h as va}from"../chunks/4Px52Ah5.js";import{i as H}from"../chunks/CrFqM1sv.js";import{e as at,i as st}from"../chunks/CibRLjUn.js";import{s as y,c as da,b as ke,r as Te,a as fa}from"../chunks/SS51CJoV.js";import{e as g}from"../chunks/D1dF0dAw.js";import{b as xe}from"../chunks/DWbEOfIm.js";import{p as jt}from"../chunks/CWmzcjye.js";import{i as Ot}from"../chunks/DXZuKXJG.js";import{g as ua}from"../chunks/mwWZaAAN.js";import{b as h}from"../chunks/D72yswqP.js";import{g as pa}from"../chunks/V75GPHfv.js";import{p as ma}from"../chunks/CoBwq6WO.js";import{b as ga,a as ha}from"../chunks/CgitGSmD.js";import{b as _a}from"../chunks/CDDHeTpH.js";import{l as It,p as ne}from"../chunks/CdjmU_cv.js";import{P as Vt}from"../chunks/XVZJVHkn.js";const ya=!1,es=Object.freeze(Object.defineProperty({__proto__:null,prerender:ya},Symbol.toStringTag,{value:"Module"}));function Mt(){const W=document.getElementById("current-datetime");if(W){const f=new Date,J={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};W.textContent=f.toLocaleDateString("en-US",J)}}function ba(){document.querySelectorAll(".search-fields input").forEach(f=>{const J=f.id+"_"+Math.random().toString(36).substring(2,9);f.setAttribute("name",J),(f.id==="State"||f.id==="Zip"||f.id==="Date"||f.id==="ST-address"||f.id==="City"||f.id==="Fuel")&&(f.setAttribute("autocomplete","new-password"),f.setAttribute("data-lpignore","true"),f.setAttribute("data-form-type","other"))})}var Da=$('<div class="dropdown-item svelte-1o6jmi1"> </div>'),wa=$('<label> </label> <div class="custom-dropdown svelte-1o6jmi1"><div class="input-wrapper svelte-1o6jmi1"><input> <div class="dropdown-arrow svelte-1o6jmi1"></div></div> <div></div></div>',1);function Bt(W,f){const J=It(f,["children","$$slots","$$events","$$legacy"]),$e=It(J,["prerender","id","label","placeholder","options","value","onChange"]);Yt(f,!1);let A=ne(f,"id",8,""),k=ne(f,"label",8,""),Ce=ne(f,"placeholder",8,"Select or type"),M=ne(f,"options",24,()=>[]),B=ne(f,"value",12,""),Y=ne(f,"onChange",8,()=>{});const D=!0;let i=P(!1),N=P(),U=P([...M()]);function ae(){p(i,!t(i)),t(i)&&p(U,[...M()])}function O(_){B(_),Y()(_),p(i,!1)}function K(){const _=B().toLowerCase();p(U,M().filter(X=>X.toLowerCase().includes(_))),p(i,!0)}function ve(_){t(N)&&!t(N).contains(_.target)&&p(i,!1)}function Ue(_){_.stopPropagation(),p(U,[...M()]),ae()}Ot();var F=wa();g("click",ia,ve);var se=oe(F),de=l(se,!0);s(se);var fe=a(se,2),ue=l(fe),j=l(ue);Te(j);let pe;var Oe=a(j,2);s(ue);var le=a(ue,2);let re;return at(le,5,()=>t(U),st,(_,X)=>{var q=Da(),Le=l(q,!0);s(q),V(()=>m(Le,t(X))),g("click",q,()=>O(t(X))),b(_,q)}),s(le),s(fe),_a(fe,_=>p(N,_),()=>t(N)),V(_=>{y(se,"for",A()),m(de,k()),pe=da(j,pe,{id:A(),type:"text",placeholder:Ce(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",...$e},"svelte-1o6jmi1"),re=ke(le,1,"dropdown-content svelte-1o6jmi1",null,re,_)},[()=>({show:t(i)})],ce),xe(j,B),g("input",j,K),g("focus",j,()=>{p(U,[...M()]),p(i,!0)}),g("keydown",j,function(_){ha.call(this,f,_)}),g("click",Oe,Ue),b(W,F),ga(f,"prerender",D),Ut({prerender:D})}var Sa=na('<meta charset="UTF-8" class="svelte-1fl9113"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-1fl9113"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-1fl9113"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-1fl9113"> <link rel="stylesheet" class="svelte-1fl9113"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-1fl9113"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-1fl9113"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-1fl9113"><\/script>',1),ka=$('<tr class="svelte-1fl9113"><td colspan="5" style="text-align: center; padding: 20px;" class="svelte-1fl9113">Loading events...</td></tr>'),Ta=$('<tr class="svelte-1fl9113"><td colspan="5" style="text-align: center; padding: 20px; color: red;" class="svelte-1fl9113"> </td></tr>'),xa=$('<tr><td colspan="4" class="details-cell svelte-1fl9113"><div class="details-header svelte-1fl9113">Details:</div> <div class="details-content svelte-1fl9113"><div class="detail-row svelte-1fl9113"> </div> <div class="detail-row svelte-1fl9113"><span class="label svelte-1fl9113">Trailer No.:</span> </div> <div class="detail-row svelte-1fl9113"><span class="label svelte-1fl9113">Full Address:</span> </div> <div class="detail-row svelte-1fl9113"><span class="label svelte-1fl9113">Product:</span> <span class="label svelte-1fl9113">Tank:</span> </div></div></td><td class="svelte-1fl9113"><button class="more-details svelte-1fl9113">View Vehicle Timeline</button></td></tr>'),$a=$('<tr><td class="svelte-1fl9113"> </td><td class="svelte-1fl9113"> </td><td class="svelte-1fl9113"> </td><td class="svelte-1fl9113"> </td><td class="svelte-1fl9113"> </td></tr> <!>',1),Ca=$('<tr class="svelte-1fl9113"><td colspan="5" style="text-align: center; padding: 20px;" class="svelte-1fl9113">No results found</td></tr>'),La=$('<div class="loading-message svelte-1fl9113" style="text-align: center;">Loading events...</div>'),Ea=$('<div class="error-message svelte-1fl9113" style="text-align: center;"> </div>'),Pa=$('<div class="card-details svelte-1fl9113"><hr class="svelte-1fl9113"> <div class="details-header svelte-1fl9113">Details:</div> <div class="details-content svelte-1fl9113"><div class="detail-row svelte-1fl9113"> </div> <div class="detail-row svelte-1fl9113"><span class="label svelte-1fl9113">Trailer No:</span> </div> <div class="detail-row svelte-1fl9113"><span class="label svelte-1fl9113">Full Address:</span> </div> <div class="detail-row svelte-1fl9113"><span class="label svelte-1fl9113">Product:</span> <span class="label svelte-1fl9113">Tank:</span> </div> <button class="more-details mobile-details-btn svelte-1fl9113">View Vehicle Timeline</button></div></div>'),Fa=$('<div><div class="card-header svelte-1fl9113"><div class="card-item svelte-1fl9113"><span class="card-label svelte-1fl9113"> </span></div> <div class="card-item svelte-1fl9113"><span class="card-value svelte-1fl9113" style="margin-left: 2vw;"> </span> <span class="card-value svelte-1fl9113" style="margin-left: 2vw;"> </span> <span class="card-value svelte-1fl9113" style="position: relative;margin-left:auto"> </span></div></div> <!></div>'),Aa=$('<div class="no-results svelte-1fl9113" style="text-align: center;">No results found</div>'),Na=$(`<header class="svelte-1fl9113"><div class="header-container svelte-1fl9113"><div class="top-header svelte-1fl9113"><a class="top-header-link svelte-1fl9113" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-1fl9113" href=" ">Contact Us</a></div> <div class="header svelte-1fl9113"><div class="header-background svelte-1fl9113"></div> <div class="hamburger-menu svelte-1fl9113" id="hamburger-menu"><span class="svelte-1fl9113"></span> <span class="svelte-1fl9113"></span> <span class="svelte-1fl9113"></span></div> <a class="svelte-1fl9113">Home</a> <a class="svelte-1fl9113">Inventory</a> <a class="svelte-1fl9113">Cross-Drop Prevention</a> <a class="svelte-1fl9113">Site Data</a> <a class="svelte-1fl9113">Analytics</a> <input type="text" placeholder="Search..." class="svelte-1fl9113"> <img alt="Berrys Logo" class="svelte-1fl9113"></div></div></header> <div class="mobile-sidebar svelte-1fl9113" id="mobile-sidebar"><a class="svelte-1fl9113">Home</a> <a class="svelte-1fl9113">Vehicle Logging</a> <a class="svelte-1fl9113">Cross-Drop Prevention</a> <a class="svelte-1fl9113">Site Data</a> <a class="svelte-1fl9113">Inventory</a> <a class="svelte-1fl9113">Analytics</a> <span class="footer-text svelte-1fl9113">Contact Us <br class="svelte-1fl9113"> Berrys Technologies Ltd 141 Lichfield Road, Birmingham , B6 5SP , United Kingdom <br class="svelte-1fl9113"> 0121 558 4411 <br class="svelte-1fl9113"> enquiries@berrys.com</span></div> <div class="overlay svelte-1fl9113" id="overlay"></div> <div class="sub-header-container svelte-1fl9113"><div class="sub-header svelte-1fl9113"><img alt="Truck Graphic" class="subheader-image svelte-1fl9113"> <h1 class="svelte-1fl9113">Vehicle Logging</h1> <span class="svelte-1fl9113">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-1fl9113"><a class="svelte-1fl9113">Home</a> / <span class="svelte-1fl9113">Vehicle Logging</span></div></div> <main class="vehicle-logging-page svelte-1fl9113"><div class="main-container svelte-1fl9113"><button class="toggle-search-btn svelte-1fl9113"><label for="search-fields" class="search-label svelte-1fl9113">Search <span style="font-size:1rem" class="svelte-1fl9113"> </span></label></button> <div><label for="ST-address" class="svelte-1fl9113">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-1fl9113"> <!> <!> <label for="Trailer_No" class="svelte-1fl9113">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-1fl9113"> <label for="Date" class="svelte-1fl9113">Date</label> <input type="date" id="Date" name="Date" placeholder="YYYY-MM-DD" class="svelte-1fl9113"> <label for="Fuel" class="svelte-1fl9113">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-1fl9113"> <div class="button-container svelte-1fl9113"><button class="search-button svelte-1fl9113">Search</button> <button class="clear-button svelte-1fl9113">Clear</button></div></div> <div class="table-header svelte-1fl9113"><div class="live-status svelte-1fl9113"><div class="toggle-live svelte-1fl9113"><label for="table-type" class="table-type svelte-1fl9113">LIVE <span class="live-indicator svelte-1fl9113"></span></label></div> <label for="table-type" class="table-type svelte-1fl9113"><span id="current-datetime" class="current-time svelte-1fl9113"></span></label></div> <div class="export-dropdown svelte-1fl9113"><button class="export-button svelte-1fl9113">Export As ▼</button> <div class="dropdown-content svelte-1fl9113" id="exportDropdown"><a href=" " class="svelte-1fl9113">CSV</a> <a href=" " class="svelte-1fl9113">PDF</a></div></div></div> <div class="data-container svelte-1fl9113"><table class="desktop-view svelte-1fl9113"><thead class="svelte-1fl9113"><tr class="svelte-1fl9113"><th class="svelte-1fl9113">Date</th><th class="svelte-1fl9113">Time</th><th class="svelte-1fl9113">City</th><th class="svelte-1fl9113">Vehicle ID</th><th class="svelte-1fl9113">Prevented Delivery</th></tr></thead><tbody class="svelte-1fl9113"><!></tbody></table> <div class="mobile-card-view svelte-1fl9113"><!></div></div></div></main> <footer class="svelte-1fl9113"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-1fl9113"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-1fl9113">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-1fl9113"></div></footer>`,1);function ts(W,f){Yt(f,!1);const J=ua(ma).url.pathname;function $e(e){pa(`${h}/vehicle/${e["Trailer No."]}`,{state:{from:J,trailer:e["Trailer No."]}})}let A=[],k=P([]),Ce=P([]),M=P([]),B=P(!0),Y=P(null),D=P([]),i=P({address:"",state:"",city:"",trailer:"",date:"",fuel:""}),N=P(!1);async function U(){try{p(B,!0),p(Y,null),console.log("Fetching prevented delivery events from API...");const e=await fetch(`${Vt}/api/Vehicle_Logging`,{method:"GET",credentials:"include"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json();console.log("Prevented Delivery Events Data Loaded:",r),A=r,p(k,[...A]),p(M,[...new Set(A.map(n=>n.State).filter(n=>n&&n.trim()!==""))]),p(Ce,[...new Set(A.map(n=>n.City).filter(n=>n&&n.trim()!==""))]),p(D,Array(t(k).length).fill(!1)),re(!0)}catch(e){console.error("Error fetching prevented delivery events:",e),p(Y,"Failed to load prevented delivery events data. Please try again.")}finally{p(B,!1)}}function ae(e){if(!e)return"";const[r,n,w]=e.split("."),c=new Date(w,n-1,r);if(isNaN(c.getTime()))return e;const d=new Date;if((d-c)/(1e3*60)<=30)return"Just now";if(c.getDate()===d.getDate()&&c.getMonth()===d.getMonth()&&c.getFullYear()===d.getFullYear())return"Today";const u=new Date(d);if(u.setDate(d.getDate()-1),c.getDate()===u.getDate()&&c.getMonth()===u.getMonth()&&c.getFullYear()===u.getFullYear())return"Yesterday";const o=new Date(d);if(o.setDate(d.getDate()-2),c.getDate()===o.getDate()&&c.getMonth()===o.getMonth()&&c.getFullYear()===o.getFullYear())return"Two days ago";const T={year:"numeric",month:"long",day:"numeric"};return c.toLocaleDateString("en-US",T)}function O(e){return typeof e!="number"||isNaN(e)?"":new Date(e*1e3).toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit",year:"numeric"}).replace(/\//g,".")}function K(e){return typeof e!="number"||isNaN(e)?"":new Date(e*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function ve(e){return e%2===0?"row-even":"row-odd"}function Ue(){p(N,!t(N))}function F(){p(k,A.filter(e=>{const r=!t(i).address||e.Address&&e.Address.toLowerCase().includes(t(i).address.toLowerCase()),n=!t(i).state||e.State&&e.State.toLowerCase().includes(t(i).state.toLowerCase()),w=!t(i).city||e.City&&e.City.toLowerCase().includes(t(i).city.toLowerCase()),c=!t(i).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(i).trailer.toLowerCase()),d=e.event_timestamp?new Date(e.event_timestamp*1e3).toISOString().split("T")[0]:"",S=!t(i).date||d&&d.includes(t(i).date),C=!t(i).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(i).fuel.toLowerCase());return r&&n&&w&&c&&S&&C})),p(D,Array(t(k).length).fill(!1)),re()}function se(){console.log("Clearing search parameters."),p(i,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),p(k,[...A]),p(D,Array(t(k).length).fill(!1)),re(!0)}function de(e){te(D,t(D)[e]=!t(D)[e]),p(D,t(D))}function fe(){document.getElementById("exportDropdown").classList.toggle("show")}function ue(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(r=>r.value.trim()!=="")}function j(){let e=[];const r=["Date","Time","City","Vehicle ID","Prevented Delivery","Address","State","Tank No."];e.push(r.join(",")),t(k).forEach(o=>{const T=O(o.event_timestamp),z=K(o.event_timestamp),v=[`"${T}"`,`"${z}"`,`"${o.City||""}"`,`"${o["Trailer No."]||""}"`,`"${o["Prevented Delivery "]||""}"`,`"${o.Address||""}"`,`"${o.State||""}"`,`"T${o.tank_number||""}"`];e.push(v.join(","))});const n=e.join(`
`),w=new Blob([n],{type:"text/csv;charset=utf-8;"}),c=new Date,d=c.toISOString().split("T")[0],S=c.toTimeString().split(" ")[0].replace(/:/g,"-"),u=`vehicle_logging_${d}_${S}.csv`;if("showSaveFilePicker"in window){async function o(){try{const z=await(await window.showSaveFilePicker({suggestedName:u,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await z.write(w),await z.close()}catch(T){T.name!=="AbortError"&&pe(w,u)}}o()}else pe(w,u)}function pe(e,r){const n=document.createElement("a");n.href=URL.createObjectURL(e),n.setAttribute("download",r),document.body.appendChild(n),n.click(),document.body.removeChild(n)}async function Oe(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const r=new e;r.setFont("helvetica","bold"),r.setFontSize(16),r.text("Vehicle Logging Data",14,15);const n=new Date().toLocaleString();r.setFontSize(10),r.setFont("helvetica","normal"),r.text(`Generated: ${n}`,14,25);const w=["Date","Time","City","Vehicle ID","Prevented Delivery","Address","State","Tank No."],c=t(k).map(o=>[O(o.event_timestamp),K(o.event_timestamp),o.City||"",o["Trailer No."]||"",o["Prevented Delivery "]||"",o.Address||"",o.State||"",`T${o.tank_number||""}`]);r.autoTable({head:[w],body:c,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const d=new Date,S=d.toISOString().split("T")[0],C=d.toTimeString().split(" ")[0].replace(/:/g,"-"),u=`vehicle_logging_${S}_${C}.pdf`;if("showSaveFilePicker"in window)try{const T=await(await window.showSaveFilePicker({suggestedName:u,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await T.write(r.output("blob")),await T.close()}catch(o){console.error("File save error:",o),le(r,u)}else le(r,u);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function le(e,r){e.save(r)}function re(e=!1){const r=document.querySelector(".toggle-live");r&&(!e&&ue()?r.style.display="none":r.style.display="block")}function _(){const e=document.getElementById("hamburger-menu"),r=document.getElementById("mobile-sidebar"),n=document.getElementById("overlay");e&&r&&n&&(e.addEventListener("click",function(){r.classList.toggle("active"),n.style.display=r.classList.contains("active")?"block":"none"}),n.addEventListener("click",function(){r.classList.remove("active"),n.style.display="none"}),r.querySelectorAll("a").forEach(c=>{c.addEventListener("click",function(){r.classList.remove("active"),n.style.display="none"})}))}ca(async()=>{_(),Mt(),ba();const e=new EventSource(`${Vt}/api/events/subscribe`);e.onopen=()=>{console.log("Connected to SSE stream.")},e.addEventListener("dataUpdate",n=>{console.log("Received SSE update:",n.data),JSON.parse(n.data).type==="vehicleLogging"&&(console.log("Vehicle Logging data changed via SSE, re-fetching..."),U())}),e.onerror=n=>{console.error("SSE connection error:",n),e.close()},await U();const r=setInterval(Mt,1e3);return()=>{e.close(),console.log("SSE connection closed."),clearInterval(r)}}),Ot();var X=Na();va(e=>{var r=Sa();oa.title="Vehicle Logging";var n=a(oe(r),8);y(n,"href",`${h??""}/css/styles.css`),Ye(6),b(e,r)});var q=oe(X),Le=l(q),lt=a(l(Le),2),rt=l(lt);fa(rt,`background: url(${h??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${h??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${h??""}/svg/Vector_1.svg);`);var it=a(rt,4);y(it,"href",`${h??""}/home`);var nt=a(it,2);y(nt,"href",`${h??""}/inventory`);var ot=a(nt,2);y(ot,"href",`${h??""}/cross-drops`);var ct=a(ot,2);y(ct,"href",`${h??""}/site-data`);var vt=a(ct,2);y(vt,"href",`${h??""}/analytics`);var qt=a(vt,4);y(qt,"src",`${h??""}/images/Midas_Link_logo.png`),s(lt),s(Le),s(q);var qe=a(q,2),dt=l(qe);y(dt,"href",`${h??""}/home`);var ft=a(dt,2);y(ft,"href",`${h??""}/vehicle-logging`);var ut=a(ft,2);y(ut,"href",`${h??""}/cross-drops`);var pt=a(ut,2);y(pt,"href",`${h??""}/site-data`);var mt=a(pt,2);y(mt,"href",`${h??""}/inventory`);var zt=a(mt,2);y(zt,"href",`${h??""}/analytics`),Ye(2),s(qe);var ze=a(qe,4),Re=l(ze),Rt=l(Re);y(Rt,"src",`${h??""}/images/Truck_graphic.png`),Ye(4),s(Re);var gt=a(Re,2),Gt=l(gt);y(Gt,"href",`${h??""}/home`),Ye(2),s(gt),s(ze);var Ge=a(ze,2),ht=l(Ge),Ee=l(ht),_t=l(Ee),yt=a(l(_t)),Ht=l(yt,!0);s(yt),s(_t),s(Ee);var Pe=a(Ee,2);let bt;var Fe=a(l(Pe),2);Te(Fe);var Dt=a(Fe,2);Bt(Dt,{id:"State",label:"State",get options(){return t(M)},get value(){return t(i).state},set value(e){te(i,t(i).state=e)},$$events:{keydown:e=>{e.key==="Enter"&&F()}},$$legacy:!0});var wt=a(Dt,2);Bt(wt,{id:"City",label:"City",get options(){return t(Ce)},get value(){return t(i).city},set value(e){te(i,t(i).city=e)},$$events:{keydown:e=>{e.key==="Enter"&&F()}},$$legacy:!0});var Ae=a(wt,4);Te(Ae);var Ne=a(Ae,4);Te(Ne);var je=a(Ne,4);Te(je);var St=a(je,2),kt=l(St),Wt=a(kt,2);s(St),s(Pe);var He=a(Pe,2),Tt=a(l(He),2),xt=l(Tt),$t=a(xt,2),Ct=l($t),Jt=a(Ct,2);s($t),s(Tt),s(He);var Lt=a(He,2),We=l(Lt),Et=a(l(We)),Kt=l(Et);{var Xt=e=>{var r=ka();b(e,r)},Zt=(e,r)=>{{var n=c=>{var d=Ta(),S=l(d),C=l(S,!0);s(S),s(d),V(()=>m(C,t(Y))),b(c,d)},w=(c,d)=>{{var S=u=>{var o=Nt(),T=oe(o);at(T,1,()=>t(k),st,(z,v,L)=>{var R=$a(),I=oe(R),Z=l(I),Ie=l(Z,!0);s(Z);var me=a(Z),Ve=l(me,!0);s(me);var Q=a(me),Je=l(Q,!0);s(Q);var ee=a(Q),Ke=l(ee,!0);s(ee);var ge=a(ee),Xe=l(ge,!0);s(ge),s(I);var Ze=a(I,2);{var Qe=E=>{var x=xa(),G=l(x),ie=a(l(G),2),he=l(ie),_e=l(he);s(he);var ye=a(he,2),be=a(l(ye));s(ye);var De=a(ye,2),we=a(l(De));s(De);var Se=a(De,2),Me=a(l(Se)),et=a(Me,2);s(Se),s(ie),s(G);var Be=a(G),tt=l(Be);s(Be),s(x),V((sa,la,ra)=>{ke(x,1,`details-row ${sa??""}`,"svelte-1fl9113"),m(_e,`${la??""} | ${ra??""}`),m(be,` ${t(v)["Trailer No."]??""}`),m(we,` ${(t(v).Address||"")??""}, ${t(v).City??""} ${t(v).State??""}`),m(Me,` ${(t(v)["Prevented Delivery "]||t(v).Delivered||"")??""} | `),m(et,` T${(t(v).tank_number||"")??""}`)},[()=>ve(L),()=>ae(O(t(v).event_timestamp)),()=>K(t(v).event_timestamp)],ce),g("click",tt,()=>$e(t(v))),g("click",x,()=>de(L)),b(E,x)};H(Ze,E=>{t(D)[L]&&E(Qe)})}V((E,x,G)=>{ke(I,1,`main-row ${E??""} ${t(D)[L]?"hover-row":""}`,"svelte-1fl9113"),m(Ie,x),m(Ve,G),m(Je,t(v).City),m(Ke,t(v)["Trailer No."]),m(Xe,t(v)["Prevented Delivery "]||t(v).Delivered)},[()=>ve(L),()=>ae(O(t(v).event_timestamp)),()=>K(t(v).event_timestamp)],ce),g("click",I,()=>de(L)),b(z,R)}),b(u,o)},C=u=>{var o=Ca();b(u,o)};H(c,u=>{t(k).length>0?u(S):u(C,!1)},d)}};H(e,c=>{t(Y)?c(n):c(w,!1)},r)}};H(Kt,e=>{t(B)?e(Xt):e(Zt,!1)})}s(Et),s(We);var Pt=a(We,2),Qt=l(Pt);{var ea=e=>{var r=La();b(e,r)},ta=(e,r)=>{{var n=c=>{var d=Ea(),S=l(d,!0);s(d),V(()=>m(S,t(Y))),b(c,d)},w=(c,d)=>{{var S=u=>{var o=Nt(),T=oe(o);at(T,1,()=>t(k),st,(z,v,L)=>{var R=Fa(),I=l(R),Z=l(I),Ie=l(Z),me=l(Ie,!0);s(Ie),s(Z);var Ve=a(Z,2),Q=l(Ve),Je=l(Q);s(Q);var ee=a(Q,2),Ke=l(ee);s(ee);var ge=a(ee,2),Xe=l(ge,!0);s(ge),s(Ve),s(I);var Ze=a(I,2);{var Qe=E=>{var x=Pa(),G=a(l(x),4),ie=l(G),he=l(ie);s(ie);var _e=a(ie,2),ye=a(l(_e));s(_e);var be=a(_e,2),De=a(l(be));s(be);var we=a(be,2),Se=a(l(we)),Me=a(Se,2);s(we);var et=a(we,2);s(G),s(x),V((Be,tt)=>{m(he,`${Be??""} | ${tt??""}`),m(ye,` ${t(v)["Trailer No."]??""}`),m(De,` ${(t(v).Address||"")??""}, ${(t(v).City||"")??""}
                      ${(t(v).State||"")??""}`),m(Se,` ${(t(v)["Prevented Delivery "]||t(v).Delivered||"")??""} `),m(Me,` T${(t(v).tank_number||"")??""}`)},[()=>ae(O(t(v).event_timestamp)),()=>K(t(v).event_timestamp)],ce),g("click",et,()=>$e(t(v))),b(E,x)};H(Ze,E=>{t(D)[L]&&E(Qe)})}s(R),V((E,x)=>{ke(R,1,`card ${E??""}`,"svelte-1fl9113"),m(me,x),m(Je,`Product: ${(t(v)["Prevented Delivery "]||t(v).Delivered)??""}`),m(Ke,`Vehicle: ${t(v)["Trailer No."]??""}`),m(Xe,t(D)[L]?"▲":"▼")},[()=>ve(L),()=>ae(O(t(v).event_timestamp))],ce),g("click",R,()=>de(L)),b(z,R)}),b(u,o)},C=u=>{var o=Aa();b(u,o)};H(c,u=>{t(k).length>0?u(S):u(C,!1)},d)}};H(e,c=>{t(Y)?c(n):c(w,!1)},r)}};H(Qt,e=>{t(B)?e(ea):e(ta,!1)})}s(Pt),s(Lt),s(ht),s(Ge);var Ft=a(Ge,2),At=l(Ft),aa=a(l(At),2);y(aa,"src",`${h??""}/images/logo.png`),s(At),s(Ft),V(e=>{m(Ht,t(N)?"▲":"▼"),bt=ke(Pe,1,"search-fields svelte-1fl9113",null,bt,e)},[()=>({visible:t(N)})],ce),g("click",Ee,Ue),xe(Fe,()=>t(i).address,e=>te(i,t(i).address=e)),g("keydown",Fe,e=>{e.key==="Enter"&&F()}),xe(Ae,()=>t(i).trailer,e=>te(i,t(i).trailer=e)),g("keydown",Ae,e=>{e.key==="Enter"&&F()}),xe(Ne,()=>t(i).date,e=>te(i,t(i).date=e)),g("keydown",Ne,e=>{e.key==="Enter"&&F()}),xe(je,()=>t(i).fuel,e=>te(i,t(i).fuel=e)),g("keydown",je,e=>{e.key==="Enter"&&F()}),g("click",kt,F),g("click",Wt,se),g("click",xt,fe),g("click",Ct,jt(j)),g("click",Jt,jt(Oe)),b(W,X),Ut()}export{ts as component,es as universal};
