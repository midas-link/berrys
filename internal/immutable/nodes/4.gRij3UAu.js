import{t as b,a as n,c as _e,d as ge}from"../chunks/B8AjNrGC.js";import"../chunks/D34AsAzw.js";import{an as je,ap as D,aq as E,ao as ye,au as xe,ar as a,k as W,c as t,r as s,j as r,z as A,aw as ke,W as h}from"../chunks/CERrcAZ7.js";import{h as Le,s as l}from"../chunks/CEIkUs5_.js";import{i as B}from"../chunks/BIbRKX5X.js";import{e as $e,i as Ue}from"../chunks/uagtVMrj.js";import{s as J}from"../chunks/BHjRODUC.js";import{e as K}from"../chunks/CV8IrTpd.js";import{i as Ie}from"../chunks/2z9SFfgS.js";import{o as Me}from"../chunks/B_PGvOcg.js";import{b as c}from"../chunks/CB9hNx_T.js";import{g as w}from"../chunks/D9SEEr1k.js";import{P as Pe}from"../chunks/XVZJVHkn.js";const De=!1,Qe=Object.freeze(Object.defineProperty({__proto__:null,prerender:De},Symbol.toStringTag,{value:"Module"}));var Ee=_e('<script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"><\/script> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet"> <link rel="stylesheet">',1),Ae=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6">Loading users</td></tr>'),Be=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6"> </td></tr>'),Ce=b('<tr class="svelte-1jdwbw6"><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td><td class="svelte-1jdwbw6"> </td></tr>'),Se=b('<header><div class="header-container"><div class="top-header"><a class="top-header-link" href="https://berrys.com">berrys.com</a></div> <div class="header"><button class="header-btn svelte-1jdwbw6">Dashboard</button> <button class="header-btn svelte-1jdwbw6">Logout</button></div></div></header> <div class="main-container svelte-1jdwbw6"><div class="dashboard-header svelte-1jdwbw6"><h1 class="svelte-1jdwbw6">Manage users</h1> <div class="date-time"> </div></div> <div class="data-container"><table class="desktop-view svelte-1jdwbw6"><thead class="svelte-1jdwbw6"><tr class="svelte-1jdwbw6"><th class="svelte-1jdwbw6">User ID</th><th class="svelte-1jdwbw6">Full Name</th><th class="svelte-1jdwbw6">Company Name</th><th class="svelte-1jdwbw6">Email</th><th class="svelte-1jdwbw6">Phone Number</th><th class="svelte-1jdwbw6">Is Admin</th><th class="svelte-1jdwbw6">Last Login</th></tr></thead><tbody class="svelte-1jdwbw6"><!></tbody></table></div></div> <footer><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;"><span style="font-size: 1rem; font-family: Mulish;">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo"></div></footer>',1);function Ve(Q,V){je(V,!1);let u=A([]),p=A(null),_=A(!0);function X(e){return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"-")}async function Z(){await w(`${c}/login?authMessage=${encodeURIComponent("You have been logged out.")}`)}async function ee(){h(_,!0),h(p,null);try{const e=await fetch(`${Pe}/api/admin/users`,{credentials:"include"});if(!e.ok)if(e.status===401){await w(`${c}/login?authMessage=${encodeURIComponent("Your session has expired. Please log in again.")}`);return}else if(e.status===403){await w(`${c}/login?authMessage=${encodeURIComponent("Access Denied. You do not have administrator privileges.")}`);return}else{const o=await e.json().catch(()=>({message:"Unknown error occurred."}));throw new Error(o.error||`HTTP Error: ${e.status}`)}h(u,await e.json()),console.log("Admin users loaded:",r(u))}catch(e){console.error("Error fetching admin users:",e),h(p,e.message||"Failed to load users. Please try again.")}finally{h(_,!1)}}Me(async()=>{await ee()}),Ie();var C=Se();Le(e=>{var o=Ee();xe.title="Manage Users";var x=a(D(o),14);J(x,"href",`${c??""}/css/styles.css`),n(e,o)});var g=D(C),S=t(g),T=a(t(S),2),N=t(T),te=ke(()=>w(`${c}/admin`)),se=a(N,2);s(T),s(S),s(g);var j=a(g,2),y=t(j),R=a(t(y),2),ae=t(R,!0);s(R),s(y);var Y=a(y,2),z=t(Y),F=a(t(z)),re=t(F);{var oe=e=>{var o=Ae();n(e,o)},le=(e,o)=>{{var x=d=>{var v=Be(),f=t(v),m=t(f,!0);s(f),s(v),E(()=>l(m,r(p))),n(d,v)},de=(d,v)=>{{var f=m=>{var O=ge(),ne=D(O);$e(ne,1,()=>r(u),Ue,(ce,i)=>{var k=Ce(),L=t(k),ve=t(L,!0);s(L);var $=a(L),me=t($);s($);var U=a($),he=t(U,!0);s(U);var I=a(U),ue=t(I,!0);s(I);var M=a(I),pe=t(M,!0);s(M);var P=a(M),fe=t(P,!0);s(P);var H=a(P),we=t(H,!0);s(H),s(k),E(be=>{l(ve,r(i).user_id),l(me,`${r(i).first_name??""} ${r(i).last_name??""}`),l(he,r(i).company_name),l(ue,r(i).email),l(pe,r(i).phone_number),l(fe,r(i).is_admin?"Yes":"No"),l(we,be)},[()=>X(r(i).last_login)],W),n(ce,k)}),n(m,O)};B(d,m=>{r(u).length>0&&m(f)},v)}};B(e,d=>{r(p)?d(x):d(de,!1)},o)}};B(re,e=>{r(_)?e(oe):e(le,!1)})}s(F),s(z),s(Y),s(j);var q=a(j,2),G=t(q),ie=a(t(G),2);J(ie,"src",`${c??""}/images/logo.png`),s(G),s(q),E(e=>l(ae,e),[()=>new Date().toLocaleString()],W),K("click",N,function(...e){var o;(o=r(te))==null||o.apply(this,e)}),K("click",se,Z),n(Q,C),ye()}export{Ve as component,Qe as universal};
